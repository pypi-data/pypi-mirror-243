{"version":3,"file":"8ce82afcfd2a46987ac3.chunk.js","mappings":"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","sources":["webpack://superset/./src/components/ListView/ActionsBar.tsx","webpack://superset/./src/features/alerts/components/AlertStatusIcon.tsx","webpack://superset/./src/features/alerts/types.ts","webpack://superset/./src/features/alerts/components/RecipientIcon.tsx","webpack://superset/./src/components/LastUpdated/index.tsx","webpack://superset/./src/pages/AlertReportList/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport { TooltipPlacement } from 'antd/lib/tooltip';\n\nexport type ActionProps = {\n  label: string;\n  tooltip?: string | React.ReactElement;\n  placement?: TooltipPlacement;\n  icon: string;\n  onClick: () => void;\n};\n\ninterface ActionsBarProps {\n  actions: Array<ActionProps>;\n}\n\nconst StyledActions = styled.span`\n  white-space: nowrap;\n  min-width: 100px;\n  svg,\n  i {\n    margin-right: 8px;\n\n    &:hover {\n      path {\n        fill: ${({ theme }) => theme.colors.primary.base};\n      }\n    }\n  }\n`;\n\nconst ActionWrapper = styled.span`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nexport default function ActionsBar({ actions }: ActionsBarProps) {\n  return (\n    <StyledActions className=\"actions\">\n      {actions.map((action, index) => {\n        const ActionIcon = Icons[action.icon];\n        if (action.tooltip) {\n          return (\n            <Tooltip\n              id={`${action.label}-tooltip`}\n              title={action.tooltip}\n              placement={action.placement}\n              key={index}\n            >\n              <ActionWrapper\n                role=\"button\"\n                tabIndex={0}\n                className=\"action-button\"\n                data-test={action.label}\n                onClick={action.onClick}\n              >\n                <ActionIcon />\n              </ActionWrapper>\n            </Tooltip>\n          );\n        }\n\n        return (\n          <ActionWrapper\n            role=\"button\"\n            tabIndex={0}\n            className=\"action-button\"\n            onClick={action.onClick}\n            data-test={action.label}\n            key={index}\n          >\n            <ActionIcon />\n          </ActionWrapper>\n        );\n      })}\n    </StyledActions>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t, SupersetTheme, useTheme } from '@superset-ui/core';\nimport React from 'react';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport { AlertState } from '../types';\n\nfunction getStatusColor(\n  status: string,\n  isReportEnabled: boolean,\n  theme: SupersetTheme,\n) {\n  switch (status) {\n    case AlertState.Working:\n      return theme.colors.primary.base;\n    case AlertState.Error:\n      return theme.colors.error.base;\n    case AlertState.Success:\n      return isReportEnabled\n        ? theme.colors.success.base\n        : theme.colors.alert.base;\n    case AlertState.Noop:\n      return theme.colors.success.base;\n    case AlertState.Grace:\n      return theme.colors.alert.base;\n    default:\n      return theme.colors.grayscale.base;\n  }\n}\n\nexport default function AlertStatusIcon({\n  state,\n  isReportEnabled = false,\n}: {\n  state: string;\n  isReportEnabled: boolean;\n}) {\n  const theme = useTheme();\n  const lastStateConfig = {\n    icon: Icons.Check,\n    label: '',\n    status: '',\n  };\n  switch (state) {\n    case AlertState.Success:\n      lastStateConfig.icon = isReportEnabled\n        ? Icons.Check\n        : Icons.AlertSolidSmall;\n      lastStateConfig.label = isReportEnabled\n        ? t('Report sent')\n        : t('Alert triggered, notification sent');\n      lastStateConfig.status = AlertState.Success;\n      break;\n    case AlertState.Working:\n      lastStateConfig.icon = Icons.Running;\n      lastStateConfig.label = isReportEnabled\n        ? t('Report sending')\n        : t('Alert running');\n      lastStateConfig.status = AlertState.Working;\n      break;\n    case AlertState.Error:\n      lastStateConfig.icon = Icons.XSmall;\n      lastStateConfig.label = isReportEnabled\n        ? t('Report failed')\n        : t('Alert failed');\n      lastStateConfig.status = AlertState.Error;\n      break;\n    case AlertState.Noop:\n      lastStateConfig.icon = Icons.Check;\n      lastStateConfig.label = t('Nothing triggered');\n      lastStateConfig.status = AlertState.Noop;\n      break;\n    case AlertState.Grace:\n      lastStateConfig.icon = Icons.AlertSolidSmall;\n      lastStateConfig.label = t('Alert Triggered, In Grace Period');\n      lastStateConfig.status = AlertState.Grace;\n      break;\n    default:\n      lastStateConfig.icon = Icons.Check;\n      lastStateConfig.label = t('Nothing triggered');\n      lastStateConfig.status = AlertState.Noop;\n  }\n  const Icon = lastStateConfig.icon;\n  return (\n    <Tooltip title={lastStateConfig.label} placement=\"bottomLeft\">\n      <Icon\n        iconColor={getStatusColor(\n          lastStateConfig.status,\n          isReportEnabled,\n          theme,\n        )}\n      />\n    </Tooltip>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport Owner from 'src/types/Owner';\nimport { NOTIFICATION_FORMATS } from 'src/features/reports/types';\n\ntype user = {\n  id: number;\n  first_name: string;\n  last_name: string;\n};\nexport type ChartObject = {\n  id: number;\n  slice_name: string;\n  viz_type: string;\n};\n\nexport type DashboardObject = {\n  dashboard_title: string;\n  id: number;\n};\n\nexport type DatabaseObject = {\n  database_name: string;\n  id: number;\n};\n\nexport type NotificationMethodOption = 'Email' | 'Slack';\n\nexport type Recipient = {\n  recipient_config_json: {\n    target: string;\n  };\n  type: NotificationMethodOption;\n};\n\nexport type MetaObject = {\n  id?: number;\n  label?: string;\n  value?: number | string;\n};\n\nexport type Operator = '<' | '>' | '<=' | '>=' | '==' | '!=' | 'not null';\n\nexport type AlertObject = {\n  active?: boolean;\n  creation_method?: string;\n  chart?: MetaObject;\n  changed_by?: user;\n  changed_on_delta_humanized?: string;\n  chart_id: number;\n  created_by?: user;\n  created_on?: string;\n  crontab?: string;\n  custom_width?: number | null;\n  dashboard?: MetaObject;\n  dashboard_id?: number;\n  database?: MetaObject;\n  description?: string;\n  error?: string;\n  force_screenshot: boolean;\n  grace_period?: number;\n  id: number;\n  last_eval_dttm?: number;\n  last_state?: 'Success' | 'Working' | 'Error' | 'Not triggered' | 'On Grace';\n  log_retention?: number;\n  name?: string;\n  owners?: Array<Owner | MetaObject>;\n  sql?: string;\n  timezone?: string;\n  recipients?: Array<Recipient>;\n  report_format?: NOTIFICATION_FORMATS;\n  type?: string;\n  validator_config_json?: {\n    op?: Operator;\n    threshold?: number;\n  };\n  validator_type?: string;\n  working_timeout?: number;\n};\n\nexport type LogObject = {\n  end_dttm: string;\n  error_message: string;\n  id: number;\n  scheduled_dttm: string;\n  start_dttm: string;\n  state: string;\n  value: string;\n  uuid: string;\n};\n\nexport enum AlertState {\n  Success = 'Success',\n  Working = 'Working',\n  Error = 'Error',\n  Noop = 'Not triggered',\n  Grace = 'On Grace',\n}\n\nexport enum RecipientIconName {\n  Email = 'Email',\n  Slack = 'Slack',\n}\nexport interface AlertsReportsConfig {\n  ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT: number;\n  ALERT_REPORTS_DEFAULT_RETENTION: number;\n  ALERT_REPORTS_DEFAULT_CRON_VALUE: string;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetTheme, css } from '@superset-ui/core';\nimport React, { ReactElement } from 'react';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport { RecipientIconName } from '../types';\n\nconst StyledIcon = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light1};\n  margin-right: ${theme.gridUnit * 2}px;\n`;\n\nexport default function RecipientIcon({ type }: { type: string }) {\n  const recipientIconConfig: { icon: null | ReactElement; label: string } = {\n    icon: null,\n    label: '',\n  };\n  switch (type) {\n    case RecipientIconName.Email:\n      recipientIconConfig.icon = <Icons.Email css={StyledIcon} />;\n      recipientIconConfig.label = RecipientIconName.Email;\n      break;\n    case RecipientIconName.Slack:\n      recipientIconConfig.icon = <Icons.Slack css={StyledIcon} />;\n      recipientIconConfig.label = RecipientIconName.Slack;\n      break;\n    default:\n      recipientIconConfig.icon = null;\n      recipientIconConfig.label = '';\n  }\n  return recipientIconConfig.icon ? (\n    <Tooltip title={recipientIconConfig.label} placement=\"bottom\">\n      {recipientIconConfig.icon}\n    </Tooltip>\n  ) : null;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState, FunctionComponent } from 'react';\nimport moment, { Moment, MomentInput } from 'moment';\nimport { t, styled } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\n\nconst REFRESH_INTERVAL = 60000; // every minute\n\ninterface LastUpdatedProps {\n  updatedAt: MomentInput;\n  update?: React.MouseEventHandler<HTMLSpanElement>;\n}\nmoment.updateLocale('en', {\n  calendar: {\n    lastDay: '[Yesterday at] LTS',\n    sameDay: '[Today at] LTS',\n    nextDay: '[Tomorrow at] LTS',\n    lastWeek: '[last] dddd [at] LTS',\n    nextWeek: 'dddd [at] LTS',\n    sameElse: 'L',\n  },\n});\n\nconst TextStyles = styled.span`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst Refresh = styled(Icons.Refresh)`\n  color: ${({ theme }) => theme.colors.primary.base};\n  width: auto;\n  height: ${({ theme }) => theme.gridUnit * 5}px;\n  position: relative;\n  top: ${({ theme }) => theme.gridUnit}px;\n  left: ${({ theme }) => theme.gridUnit}px;\n  cursor: pointer;\n`;\n\nexport const LastUpdated: FunctionComponent<LastUpdatedProps> = ({\n  updatedAt,\n  update,\n}) => {\n  const [timeSince, setTimeSince] = useState<Moment>(moment(updatedAt));\n\n  useEffect(() => {\n    setTimeSince(() => moment(updatedAt));\n\n    // update UI every minute in case day changes\n    const interval = setInterval(() => {\n      setTimeSince(() => moment(updatedAt));\n    }, REFRESH_INTERVAL);\n\n    return () => clearInterval(interval);\n  }, [updatedAt]);\n\n  return (\n    <TextStyles>\n      {t('Last Updated %s', timeSince.isValid() ? timeSince.calendar() : '--')}\n      {update && <Refresh onClick={update} />}\n    </TextStyles>\n  );\n};\n\nexport default LastUpdated;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  t,\n  SupersetClient,\n  makeApi,\n  styled,\n  getExtensionsRegistry,\n} from '@superset-ui/core';\nimport moment from 'moment';\nimport ActionsBar, { ActionProps } from 'src/components/ListView/ActionsBar';\nimport FacePile from 'src/components/FacePile';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ListView, {\n  FilterOperator,\n  Filters,\n  ListViewProps,\n} from 'src/components/ListView';\nimport SubMenu, { SubMenuProps } from 'src/features/home/SubMenu';\nimport { Switch } from 'src/components/Switch';\nimport { DATETIME_WITH_TIME_ZONE } from 'src/constants';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport AlertStatusIcon from 'src/features/alerts/components/AlertStatusIcon';\nimport RecipientIcon from 'src/features/alerts/components/RecipientIcon';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport DeleteModal from 'src/components/DeleteModal';\nimport LastUpdated from 'src/components/LastUpdated';\nimport {\n  useListViewResource,\n  useSingleViewResource,\n} from 'src/views/CRUD/hooks';\nimport { createErrorHandler, createFetchRelated } from 'src/views/CRUD/utils';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport Owner from 'src/types/Owner';\nimport AlertReportModal from 'src/features/alerts/AlertReportModal';\nimport { AlertObject, AlertState } from 'src/features/alerts/types';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\nconst PAGE_SIZE = 25;\n\nconst AlertStateLabel: Record<AlertState, string> = {\n  [AlertState.Success]: t('Success'),\n  [AlertState.Working]: t('Working'),\n  [AlertState.Error]: t('Error'),\n  [AlertState.Noop]: t('Not triggered'),\n  [AlertState.Grace]: t('On Grace'),\n};\n\ninterface AlertListProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  isReportEnabled: boolean;\n  user: {\n    userId: string | number;\n    firstName: string;\n    lastName: string;\n  };\n}\nconst deleteAlerts = makeApi<number[], { message: string }>({\n  requestType: 'rison',\n  method: 'DELETE',\n  endpoint: '/api/v1/report/',\n});\n\nconst RefreshContainer = styled.div`\n  width: 100%;\n  padding: 0 ${({ theme }) => theme.gridUnit * 4}px\n    ${({ theme }) => theme.gridUnit * 3}px;\n  background-color: ${({ theme }) => theme.colors.grayscale.light5};\n`;\n\nconst StyledHeaderWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  > *:first-child {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst HeaderExtension = extensionsRegistry.get('alertsreports.header.icon');\n\nfunction AlertList({\n  addDangerToast,\n  isReportEnabled = false,\n  user,\n  addSuccessToast,\n}: AlertListProps) {\n  const title = isReportEnabled ? t('report') : t('alert');\n  const titlePlural = isReportEnabled ? t('reports') : t('alerts');\n  const pathName = isReportEnabled ? 'Reports' : 'Alerts';\n  const initialFilters = useMemo(\n    () => [\n      {\n        id: 'type',\n        operator: FilterOperator.equals,\n        value: isReportEnabled ? 'Report' : 'Alert',\n      },\n    ],\n    [isReportEnabled],\n  );\n  const {\n    state: {\n      loading,\n      resourceCount: alertsCount,\n      resourceCollection: alerts,\n      bulkSelectEnabled,\n      lastFetched,\n    },\n    hasPerm,\n    fetchData,\n    setResourceCollection,\n    refreshData,\n    toggleBulkSelect,\n  } = useListViewResource<AlertObject>(\n    'report',\n    t('reports'),\n    addDangerToast,\n    true,\n    undefined,\n    initialFilters,\n  );\n\n  const { updateResource } = useSingleViewResource<Partial<AlertObject>>(\n    'report',\n    t('reports'),\n    addDangerToast,\n  );\n\n  const [alertModalOpen, setAlertModalOpen] = useState<boolean>(false);\n  const [currentAlert, setCurrentAlert] = useState<Partial<AlertObject> | null>(\n    null,\n  );\n  const [currentAlertDeleting, setCurrentAlertDeleting] =\n    useState<AlertObject | null>(null);\n\n  // Actions\n  function handleAlertEdit(alert: AlertObject | null) {\n    setCurrentAlert(alert);\n    setAlertModalOpen(true);\n  }\n\n  const generateKey = () => `${new Date().getTime()}`;\n\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canCreate = hasPerm('can_write');\n\n  useEffect(() => {\n    if (bulkSelectEnabled && canDelete) {\n      toggleBulkSelect();\n    }\n  }, [isReportEnabled]);\n\n  const handleAlertDelete = ({ id, name }: AlertObject) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/report/${id}`,\n    }).then(\n      () => {\n        refreshData();\n        setCurrentAlertDeleting(null);\n        addSuccessToast(t('Deleted: %s', name));\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(t('There was an issue deleting %s: %s', name, errMsg)),\n      ),\n    );\n  };\n\n  const handleBulkAlertDelete = async (alertsToDelete: AlertObject[]) => {\n    try {\n      const { message } = await deleteAlerts(\n        alertsToDelete.map(({ id }) => id),\n      );\n      refreshData();\n      addSuccessToast(message);\n    } catch (e) {\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t(\n            'There was an issue deleting the selected %s: %s',\n            titlePlural,\n            errMsg,\n          ),\n        ),\n      )(e);\n    }\n  };\n\n  const initialSort = [{ id: 'name', desc: true }];\n\n  const toggleActive = useCallback(\n    (data: AlertObject, checked: boolean) => {\n      if (data?.id) {\n        const update_id = data.id;\n        const original = [...alerts];\n\n        setResourceCollection(\n          original.map(alert => {\n            if (alert?.id === data.id) {\n              return {\n                ...alert,\n                active: checked,\n              };\n            }\n\n            return alert;\n          }),\n        );\n\n        updateResource(update_id, { active: checked }, false, false)\n          .then()\n          .catch(() => setResourceCollection(original));\n      }\n    },\n    [alerts, setResourceCollection, updateResource],\n  );\n\n  const columns = useMemo(\n    () => [\n      {\n        Cell: ({\n          row: {\n            original: { last_state: lastState },\n          },\n        }: any) => (\n          <AlertStatusIcon\n            state={lastState}\n            isReportEnabled={isReportEnabled}\n          />\n        ),\n        accessor: 'last_state',\n        size: 'xs',\n        disableSortBy: true,\n      },\n      {\n        Cell: ({\n          row: {\n            original: { last_eval_dttm: lastEvalDttm },\n          },\n        }: any) =>\n          lastEvalDttm\n            ? moment.utc(lastEvalDttm).local().format(DATETIME_WITH_TIME_ZONE)\n            : '',\n        accessor: 'last_eval_dttm',\n        Header: t('Last run'),\n        size: 'lg',\n      },\n      {\n        accessor: 'name',\n        Header: t('Name'),\n        size: 'xl',\n      },\n      {\n        Header: t('Schedule'),\n        accessor: 'crontab_humanized',\n        size: 'xl',\n        Cell: ({\n          row: {\n            original: { crontab_humanized = '', timezone },\n          },\n        }: any) => (\n          <Tooltip\n            title={`${crontab_humanized} (${timezone})`}\n            placement=\"topLeft\"\n          >\n            <span>{`${crontab_humanized} (${timezone})`}</span>\n          </Tooltip>\n        ),\n      },\n      {\n        Cell: ({\n          row: {\n            original: { recipients },\n          },\n        }: any) =>\n          recipients.map((r: any) => (\n            <RecipientIcon key={r.id} type={r.type} />\n          )),\n        accessor: 'recipients',\n        Header: t('Notification method'),\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { created_by },\n          },\n        }: any) =>\n          created_by ? `${created_by.first_name} ${created_by.last_name}` : '',\n        Header: t('Created by'),\n        id: 'created_by',\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { owners = [] },\n          },\n        }: any) => <FacePile users={owners} />,\n        Header: t('Owners'),\n        id: 'owners',\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { changed_on_delta_humanized: changedOn },\n          },\n        }: any) => <span className=\"no-wrap\">{changedOn}</span>,\n        Header: t('Modified'),\n        accessor: 'changed_on_delta_humanized',\n        size: 'xl',\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          const allowEdit =\n            original.owners.map((o: Owner) => o.id).includes(user.userId) ||\n            isUserAdmin(user);\n\n          return (\n            <Switch\n              disabled={!allowEdit}\n              data-test=\"toggle-active\"\n              checked={original.active}\n              onClick={(checked: boolean) => toggleActive(original, checked)}\n              size=\"small\"\n            />\n          );\n        },\n        Header: t('Active'),\n        accessor: 'active',\n        id: 'active',\n        size: 'xl',\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          const history = useHistory();\n          const handleEdit = () => handleAlertEdit(original);\n          const handleDelete = () => setCurrentAlertDeleting(original);\n          const handleGotoExecutionLog = () =>\n            history.push(`/${original.type.toLowerCase()}/${original.id}/log`);\n\n          const allowEdit =\n            original.owners.map((o: Owner) => o.id).includes(user.userId) ||\n            isUserAdmin(user);\n\n          const actions = [\n            canEdit\n              ? {\n                  label: 'execution-log-action',\n                  tooltip: t('Execution log'),\n                  placement: 'bottom',\n                  icon: 'Note',\n                  onClick: handleGotoExecutionLog,\n                }\n              : null,\n            canEdit\n              ? {\n                  label: allowEdit ? 'edit-action' : 'preview-action',\n                  tooltip: allowEdit ? t('Edit') : t('View'),\n                  placement: 'bottom',\n                  icon: allowEdit ? 'Edit' : 'Binoculars',\n                  onClick: handleEdit,\n                }\n              : null,\n            allowEdit && canDelete\n              ? {\n                  label: 'delete-action',\n                  tooltip: t('Delete'),\n                  placement: 'bottom',\n                  icon: 'Trash',\n                  onClick: handleDelete,\n                }\n              : null,\n          ].filter(item => item !== null);\n\n          return <ActionsBar actions={actions as ActionProps[]} />;\n        },\n        Header: t('Actions'),\n        id: 'actions',\n        hidden: !canEdit && !canDelete,\n        disableSortBy: true,\n        size: 'xl',\n      },\n    ],\n    [canDelete, canEdit, isReportEnabled, toggleActive],\n  );\n\n  const subMenuButtons: SubMenuProps['buttons'] = [];\n\n  if (canCreate) {\n    subMenuButtons.push({\n      name: (\n        <>\n          <i className=\"fa fa-plus\" /> {title}\n        </>\n      ),\n      buttonStyle: 'primary',\n      onClick: () => {\n        handleAlertEdit(null);\n      },\n    });\n  }\n  if (canDelete) {\n    subMenuButtons.push({\n      name: t('Bulk select'),\n      onClick: toggleBulkSelect,\n      buttonStyle: 'secondary',\n      'data-test': 'bulk-select-toggle',\n    });\n  }\n\n  const emptyState = {\n    title: t('No %s yet', titlePlural),\n    image: 'filter-results.svg',\n    buttonAction: () => handleAlertEdit(null),\n    buttonText: canCreate ? (\n      <>\n        <i className=\"fa fa-plus\" /> {title}{' '}\n      </>\n    ) : null,\n  };\n\n  const filters: Filters = useMemo(\n    () => [\n      {\n        Header: t('Owner'),\n        key: 'owner',\n        id: 'owners',\n        input: 'select',\n        operator: FilterOperator.relationManyMany,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchRelated(\n          'report',\n          'owners',\n          createErrorHandler(errMsg =>\n            t('An error occurred while fetching owners values: %s', errMsg),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Created by'),\n        key: 'created_by',\n        id: 'created_by',\n        input: 'select',\n        operator: FilterOperator.relationOneMany,\n        unfilteredLabel: 'All',\n        fetchSelects: createFetchRelated(\n          'report',\n          'created_by',\n          createErrorHandler(errMsg =>\n            t('An error occurred while fetching created by values: %s', errMsg),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Status'),\n        key: 'status',\n        id: 'last_state',\n        input: 'select',\n        operator: FilterOperator.equals,\n        unfilteredLabel: 'Any',\n        selects: [\n          {\n            label: AlertStateLabel[AlertState.Success],\n            value: AlertState.Success,\n          },\n          {\n            label: AlertStateLabel[AlertState.Working],\n            value: AlertState.Working,\n          },\n          { label: AlertStateLabel[AlertState.Error], value: AlertState.Error },\n          { label: AlertStateLabel[AlertState.Noop], value: AlertState.Noop },\n          { label: AlertStateLabel[AlertState.Grace], value: AlertState.Grace },\n        ],\n      },\n      {\n        Header: t('Search'),\n        key: 'search',\n        id: 'name',\n        input: 'search',\n        operator: FilterOperator.contains,\n      },\n    ],\n    [],\n  );\n\n  const header = HeaderExtension ? (\n    <StyledHeaderWithIcon>\n      <div>{t('Alerts & reports')}</div>\n      <HeaderExtension />\n    </StyledHeaderWithIcon>\n  ) : (\n    t('Alerts & reports')\n  );\n\n  return (\n    <>\n      <SubMenu\n        activeChild={pathName}\n        name={header}\n        tabs={[\n          {\n            name: 'Alerts',\n            label: t('Alerts'),\n            url: '/alert/list/',\n            usesRouter: true,\n            'data-test': 'alert-list',\n          },\n          {\n            name: 'Reports',\n            label: t('Reports'),\n            url: '/report/list/',\n            usesRouter: true,\n            'data-test': 'report-list',\n          },\n        ]}\n        buttons={subMenuButtons}\n      >\n        <RefreshContainer>\n          <LastUpdated updatedAt={lastFetched} update={() => refreshData()} />\n        </RefreshContainer>\n      </SubMenu>\n      <AlertReportModal\n        alert={currentAlert}\n        addDangerToast={addDangerToast}\n        layer={currentAlert}\n        onHide={() => {\n          setAlertModalOpen(false);\n          setCurrentAlert(null);\n          refreshData();\n        }}\n        show={alertModalOpen}\n        isReport={isReportEnabled}\n        key={currentAlert?.id || generateKey()}\n      />\n      {currentAlertDeleting && (\n        <DeleteModal\n          description={t(\n            'This action will permanently delete %s.',\n            currentAlertDeleting.name,\n          )}\n          onConfirm={() => {\n            if (currentAlertDeleting) {\n              handleAlertDelete(currentAlertDeleting);\n            }\n          }}\n          onHide={() => setCurrentAlertDeleting(null)}\n          open\n          title={t('Delete %s?', title)}\n        />\n      )}\n      <ConfirmStatusChange\n        title={t('Please confirm')}\n        description={t(\n          'Are you sure you want to delete the selected %s?',\n          titlePlural,\n        )}\n        onConfirm={handleBulkAlertDelete}\n      >\n        {confirmDelete => {\n          const bulkActions: ListViewProps['bulkActions'] = canDelete\n            ? [\n                {\n                  key: 'delete',\n                  name: t('Delete'),\n                  onSelect: confirmDelete,\n                  type: 'danger',\n                },\n              ]\n            : [];\n          return (\n            <ListView<AlertObject>\n              className=\"alerts-list-view\"\n              columns={columns}\n              count={alertsCount}\n              data={alerts}\n              emptyState={emptyState}\n              fetchData={fetchData}\n              filters={filters}\n              initialSort={initialSort}\n              loading={loading}\n              bulkActions={bulkActions}\n              bulkSelectEnabled={bulkSelectEnabled}\n              disableBulkSelect={toggleBulkSelect}\n              refreshData={refreshData}\n              addDangerToast={addDangerToast}\n              addSuccessToast={addSuccessToast}\n              pageSize={PAGE_SIZE}\n            />\n          );\n        }}\n      </ConfirmStatusChange>\n    </>\n  );\n}\n\nexport default withToasts(AlertList);\n"],"names":["StyledActions","styled","span","_ref","theme","colors","primary","base","ActionWrapper","_ref2","grayscale","ActionsBar","_ref3","actions","___EmotionJSX","className","map","action","index","ActionIcon","Icons","icon","tooltip","Tooltip","id","label","title","placement","key","role","tabIndex","onClick","getStatusColor","status","isReportEnabled","AlertState","Working","Error","error","Success","success","alert","Noop","Grace","AlertStatusIcon","state","useTheme","lastStateConfig","Check","AlertSolidSmall","t","Running","XSmall","Icon","iconColor","RecipientIconName","StyledIcon","css","light1","gridUnit","RecipientIcon","type","recipientIconConfig","Email","Slack","moment","calendar","lastDay","sameDay","nextDay","lastWeek","nextWeek","sameElse","TextStyles","Refresh","_ref4","_ref5","_ref6","updatedAt","update","timeSince","setTimeSince","useState","useEffect","interval","setInterval","clearInterval","isValid","extensionsRegistry","getExtensionsRegistry","AlertStateLabel","deleteAlerts","makeApi","requestType","method","endpoint","RefreshContainer","div","light5","StyledHeaderWithIcon","HeaderExtension","get","withToasts","addDangerToast","user","addSuccessToast","titlePlural","pathName","initialFilters","useMemo","operator","FilterOperator","equals","value","loading","resourceCount","alertsCount","resourceCollection","alerts","bulkSelectEnabled","lastFetched","hasPerm","fetchData","setResourceCollection","refreshData","toggleBulkSelect","useListViewResource","undefined","updateResource","useSingleViewResource","alertModalOpen","setAlertModalOpen","currentAlert","setCurrentAlert","currentAlertDeleting","setCurrentAlertDeleting","handleAlertEdit","canEdit","canDelete","canCreate","initialSort","desc","toggleActive","useCallback","data","checked","update_id","original","active","then","catch","columns","Cell","_ref8","row","last_state","lastState","accessor","size","disableSortBy","_ref9","last_eval_dttm","lastEvalDttm","local","format","DATETIME_WITH_TIME_ZONE","Header","_ref10","crontab_humanized","timezone","_ref11","recipients","r","_ref12","created_by","first_name","last_name","_ref13","owners","FacePile","users","_ref14","changed_on_delta_humanized","changedOn","_ref15","allowEdit","o","includes","userId","isUserAdmin","Switch","disabled","_ref16","history","useHistory","handleGotoExecutionLog","push","toLowerCase","handleEdit","handleDelete","filter","item","hidden","subMenuButtons","name","React","buttonStyle","emptyState","image","buttonAction","buttonText","filters","input","relationManyMany","unfilteredLabel","fetchSelects","createFetchRelated","createErrorHandler","errMsg","paginate","relationOneMany","selects","contains","header","SubMenu","activeChild","tabs","url","usesRouter","buttons","LastUpdated","AlertReportModal","layer","onHide","show","isReport","Date","getTime","DeleteModal","description","onConfirm","handleAlertDelete","SupersetClient","delete","open","ConfirmStatusChange","async","alertsToDelete","message","_ref7","e","confirmDelete","bulkActions","onSelect","ListView","count","disableBulkSelect","pageSize"],"sourceRoot":""}