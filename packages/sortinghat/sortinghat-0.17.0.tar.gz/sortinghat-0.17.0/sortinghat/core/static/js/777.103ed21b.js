(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[777],{3703:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>q});var n=i(4590),a=function(){var t=this,e=t._self._c;return e("section",[e("jobs-table",{ref:"table",attrs:{"get-jobs":t.getJobs},on:{affiliate:t.affiliate,genderize:t.genderize,unify:t.unify,recommendMatches:t.recommendMatches}}),e(n.Z,{attrs:{color:"error",text:""},model:{value:t.snackbar.isOpen,callback:function(e){t.$set(t.snackbar,"isOpen",e)},expression:"snackbar.isOpen"}},[t._v(" "+t._s(t.snackbar.text)+" ")])],1)},s=[],r=i(1907),o=i(5617),c=i(5246),l=i(680),u=i(5129),d=i(2082),h=i(6035),p=i(2327),f=i(5093),m=i(604),v=i(8933),g=(i(4916),i(5306),function(){var t=this,e=t._self._c;return e(h.Z,{staticClass:"jobs section mb-5 pa-0"},[e("header",{staticClass:"header"},[e("h4",{staticClass:"title"},[e(p.Z,{attrs:{color:"black",left:"",dense:""}},[t._v(" mdi-tray-full ")]),t._v(" Jobs ")],1),e(u.Z,{staticClass:"black--text",attrs:{depressed:"",small:"",height:"34",color:"secondary"},on:{click:function(e){e.stopPropagation(),t.openModal=!0}}},[t._v(" Add ")])],1),t.jobs.length>0?e(m.Z,{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Job ID")]),e("th",{staticClass:"text-left"},[t._v("Type")]),e("th",{staticClass:"text-left"},[t._v("Date")]),e("th",{staticClass:"text-center"},[t._v("Status")])])]),e("tbody",t._l(t.jobs,(function(i){return e("tr",{key:i.jobId},[e("td",[e(v.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var a=n.on;return[e(d.Z,t._g({staticClass:"text-center clip",attrs:{outlined:"",tile:""}},a),[t._v(" "+t._s(i.jobId)+" ")])]}}],null,!0)},[e("span",[t._v(t._s(i.jobId))])])],1),e("td",{staticClass:"capitalize"},[t._v(t._s(i.jobType.replace("_"," ")))]),e("td",[t._v(t._s(t.formatDate(i.enqueuedAt)))]),e("td",{staticClass:"text-center"},[e(d.Z,{staticClass:"ma-2",attrs:{color:t.getColor(i.status),"text-color":"white"}},[t._v(" "+t._s(i.status)+" ")])],1)])})),0)]},proxy:!0}],null,!1,1611325822)}):t._e(),t.jobs.length>0?e("div",{staticClass:"text-center pa-4"},[e(f.Z,{attrs:{length:t.pageCount,"total-visible":5},on:{input:function(e){return t.getPaginatedJobs(e)}},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):e("p",{staticClass:"text-subtitle-1 pa-7"},[t._v("There are no jobs in the queue.")]),e("job-modal",t._g({attrs:{"is-open":t.openModal},on:{"update:isOpen":function(e){t.openModal=e},"update:is-open":function(e){t.openModal=e}}},t.$listeners))],1)}),b=[],x=(i(3710),i(3385)),k=i(5223),y=i(5393),Z=i(4437),_=i(8560),C=i(2269),$=i(5294),w=i(6723),M=i(5234),S=(i(2526),i(1817),function(){var t=this,e=t._self._c;return e(_.Z,{attrs:{"max-width":"550px"},on:{"click:outside":t.onClose},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[e(x.Z,{staticClass:"section"},[e(k.EB,{staticClass:"header title"},[t._v("New job")]),e(k.ZB,{staticClass:"mt-3"},[e($.Z,[e(Z.Z,[e(w.Z,{attrs:{items:t.types,"menu-props":{offsetY:!0,maxWidth:500},label:"Type","item-text":"title",id:"type",dense:"","hide-details":"",outlined:""},scopedSlots:t._u([{key:"item",fn:function(i){i.index;var n=i.item;return[e(C.km,[e(C.V9,[t._v(" "+t._s(n.title)+" ")]),e(C.oZ,[t._v(" "+t._s(n.description)+" ")])],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1),"genderize"===t.selected?e($.Z,[e(Z.Z,[e(y.Z,{attrs:{label:"Exclude individuals in RecommenderExclusionTerm list",id:"genderize_exclude"},model:{value:t.forms.genderize.exclude,callback:function(e){t.$set(t.forms.genderize,"exclude",e)},expression:"forms.genderize.exclude"}}),e(y.Z,{attrs:{label:"Disable strict name validation",id:"genderize_noStrictMatching"},model:{value:t.forms.genderize.noStrictMatching,callback:function(e){t.$set(t.forms.genderize,"noStrictMatching",e)},expression:"forms.genderize.noStrictMatching"}})],1)],1):t._e(),"unify"===t.selected?e($.Z,[e(Z.Z,[e(w.Z,{attrs:{items:["name","email","username"],"menu-props":{bottom:!0,offsetY:!0},label:"Criteria",dense:"","hide-details":"",multiple:"",outlined:""},model:{value:t.forms.unify.criteria,callback:function(e){t.$set(t.forms.unify,"criteria",e)},expression:"forms.unify.criteria"}}),e(y.Z,{attrs:{label:"Exclude individuals with invalid email adresses and names",id:"unify_strict","hide-details":""},model:{value:t.forms.unify.strict,callback:function(e){t.$set(t.forms.unify,"strict",e)},expression:"forms.unify.strict"}}),e(y.Z,{attrs:{label:"Exclude individuals in RecommenderExclusionTerm list",id:"unify_exclude"},model:{value:t.forms.unify.exclude,callback:function(e){t.$set(t.forms.unify,"exclude",e)},expression:"forms.unify.exclude"}})],1)],1):t._e(),"recommendMatches"===t.selected?e($.Z,[e(Z.Z,[e(w.Z,{attrs:{items:["name","email","username"],"menu-props":{bottom:!0,offsetY:!0},label:"Criteria",dense:"","hide-details":"",multiple:"",outlined:""},model:{value:t.forms.recommendMatches.criteria,callback:function(e){t.$set(t.forms.recommendMatches,"criteria",e)},expression:"forms.recommendMatches.criteria"}}),e(y.Z,{attrs:{label:"Exclude individuals with invalid email adresses and names",id:"recommend_strict","hide-details":""},model:{value:t.forms.recommendMatches.strict,callback:function(e){t.$set(t.forms.recommendMatches,"strict",e)},expression:"forms.recommendMatches.strict"}}),e(y.Z,{attrs:{label:"Exclude individuals in RecommenderExclusionTerm list",id:"recommend_exclude"},model:{value:t.forms.recommendMatches.exclude,callback:function(e){t.$set(t.forms.recommendMatches,"exclude",e)},expression:"forms.recommendMatches.exclude"}})],1)],1):t._e()],1),e(k.h7,[e(M.Z),e(u.Z,{attrs:{color:"primary darken-1",text:""},on:{click:t.onClose}},[t._v(" Cancel ")]),e(u.Z,{attrs:{disabled:!t.selected,color:"primary",id:"confirm",depressed:""},on:{click:t.onSave}},[t._v(" Confirm ")])],1)],1)],1)}),A=[],T=[{title:"Affiliate",value:"affiliate",description:"Affiliate individuals to organizations using recommendations."},{title:"Genderize",value:"genderize",description:"Autocomplete the gender information of individuals using genderize.io recommendations. "},{title:"Unify",value:"unify",description:"Merge individuals by using matching recommendations."},{title:"Recommend matches",value:"recommendMatches",description:"Recommend identity matches for individuals."}],z={genderize:{exclude:!0,noStrictMatching:!1},unify:{criteria:["name","email","username"],exclude:!0,strict:!0},recommendMatches:{criteria:["name","email","username"],exclude:!0,strict:!0}};const j={name:"JobModal",props:{isOpen:{type:Boolean,required:!0},types:{type:Array,required:!1,default:function(){return T}}},data:function(){return{selected:null,forms:z}},methods:{onClose:function(){this.$emit("update:isOpen",!1),this.selected=null,this.forms=Object.assign({},this.forms,z)},onSave:function(){this.$emit(this.selected,this.forms[this.selected]),this.onClose()}}},L=j;var B=i(1001),I=(0,B.Z)(L,S,A,!1,null,"3f668faa",null);const O=I.exports,E={name:"JobsTable",components:{JobModal:O},props:{getJobs:{type:Function,required:!0}},data:function(){return{jobs:[],page:1,pageSize:10,pageCount:1,openModal:!1}},created:function(){this.getPaginatedJobs(1)},methods:{getPaginatedJobs:function(){var t=arguments,e=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,s;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:e.page,a=t.length>1&&void 0!==t[1]?t[1]:e.pageSize,i.next=4,e.getJobs(n,a);case 4:s=i.sent,s&&(e.jobs=s.data.jobs.entities,e.pageCount=s.data.jobs.pageInfo.numPages,e.page=s.data.jobs.pageInfo.page);case 6:case"end":return i.stop()}}),i)})))()},getColor:function(t){return"finished"===t?"#3fa500":"failed"===t?"#f41900":"started"===t?"primary":"rgba(0, 0, 0, 0.42)"},formatDate:function(t){return new Date(t).toLocaleString()}}},P=E;var J=(0,B.Z)(P,g,b,!1,null,"22c8835b",null);const N=J.exports,R={name:"Jobs",components:{JobsTable:N},data:function(){return{snackbar:{isOpen:!1,text:null}}},methods:{getJobs:function(t,e){var i=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,c.Ly)(i.$apollo,t,e);case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))()},affiliate:function(){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.ZU)(t.$apollo);case 3:t.$refs.table.getPaginatedJobs(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),t.snackbar=Object.assign(t.snackbar,{isOpen:!0,text:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},genderize:function(t){var e=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.exclude,a=t.noStrictMatching,i.prev=1,i.next=4,(0,l.hH)(e.$apollo,n,a);case 4:e.$refs.table.getPaginatedJobs(),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),e.snackbar=Object.assign(e.snackbar,{isOpen:!0,text:i.t0});case 10:case"end":return i.stop()}}),i,null,[[1,7]])})))()},unify:function(t){var e=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,s;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.criteria,a=t.exclude,s=t.strict,i.prev=1,i.next=4,(0,l.LU)(e.$apollo,n,a,s);case 4:e.$refs.table.getPaginatedJobs(),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),e.snackbar=Object.assign(e.snackbar,{isOpen:!0,text:i.t0});case 10:case"end":return i.stop()}}),i,null,[[1,7]])})))()},recommendMatches:function(t){var e=this;return(0,o.Z)((0,r.Z)().mark((function i(){var n,a,s;return(0,r.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.criteria,a=t.exclude,s=t.strict,i.prev=1,i.next=4,(0,l.GY)(e.$apollo,n,a,s);case 4:e.$refs.table.getPaginatedJobs(),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),e.snackbar=Object.assign(e.snackbar,{isOpen:!0,text:i.t0});case 10:case"end":return i.stop()}}),i,null,[[1,7]])})))()}}},D=R;var W=(0,B.Z)(D,a,s,!1,null,null,null);const q=W.exports},6035:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});i(7327),i(1539),i(7941),i(6755),i(2222),i(9894),i(4198),i(3210),i(9600);var n=i(144);function a(t){return n.ZP.extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,i){var n=i.props,a=i.data,s=i.children;a.staticClass="".concat(t," ").concat(a.staticClass||"").trim();var r=a.attrs;if(r){a.attrs={};var o=Object.keys(r).filter((function(t){if("slot"===t)return!1;var e=r[t];return t.startsWith("data-")?(a.attrs[t]=e,!1):e||"string"===typeof e}));o.length&&(a.staticClass+=" ".concat(o.join(" ")))}return n.id&&(a.domProps=a.domProps||{},a.domProps.id=n.id),e(n.tag,a,s)}})}var s=i(2653);const r=a("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var i,n=e.props,a=e.data,r=e.children,o=a.attrs;return o&&(a.attrs={},i=Object.keys(o).filter((function(t){if("slot"===t)return!1;var e=o[t];return t.startsWith("data-")?(a.attrs[t]=e,!1):e||"string"===typeof e}))),n.id&&(a.domProps=a.domProps||{},a.domProps.id=n.id),t(n.tag,(0,s.ZP)(a,{staticClass:"container",class:Array({"container--fluid":n.fluid}).concat(i||[])}),r)}})},5093:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(5916),a=i(6080),s=(i(9653),i(1058),i(4363),i(2222),i(2564),i(7658),i(6647),i(3710),i(1539),i(9714),i(1249),i(1012)),r=i(9495),o=i(8914),c=i(2733),l=i(3276),u=i(4987);const d=(0,u.Z)(o.Z,(0,c.Z)({onVisible:["init"]}),l.Z).extend({name:"v-pagination",directives:{Resize:r.Z},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(t){return t%1===0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return(0,a.Z)({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var t=parseInt(this.totalVisible,10);if(0===t||isNaN(this.length)||this.length>Number.MAX_SAFE_INTEGER)return[];var e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);var i=e%2===0?1:0,a=Math.floor(e/2),s=this.length-a+1+i;if(this.value>a&&this.value<s){var r=1,o=this.length,c=this.value-a+2,l=this.value+a-2-i,u=c-1===r+1?2:"...",d=l+1===o-1?l+1:"...";return[1,u].concat((0,n.Z)(this.range(c,l)),[d,this.length])}if(this.value===a){var h=this.value+a-1-i;return[].concat((0,n.Z)(this.range(1,h)),["...",this.length])}if(this.value===s){var p=this.value-a+1;return[1,"..."].concat((0,n.Z)(this.range(p,this.length)))}return[].concat((0,n.Z)(this.range(1,a)),["..."],(0,n.Z)(this.range(s,this.length)))}},watch:{value:function(){this.init()}},beforeMount:function(){this.init()},methods:{init:function(){var t=this;this.selected=null,this.onResize(),this.$nextTick(this.onResize),setTimeout((function(){return t.selected=t.value}),100)},onResize:function(){var t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next:function(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(t,e){var i=[];t=t>0?t:1;for(var n=t;n<=e;n++)i.push(n);return i},genIcon:function(t,e,i,n,a){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":i},attrs:{disabled:i,type:"button","aria-label":a},on:i?{}:{click:n}},[t(s.Z,[e])])])},genItem:function(t,e){var i=this,n=e===this.value&&(this.color||"primary"),a=e===this.value,s=a?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(n,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":a,"aria-label":this.$vuetify.lang.t(s,e)},on:{click:function(){return i.$emit("input",e)}}}),[e.toString()])},genItems:function(t){var e=this;return this.items.map((function(i,n){return t("li",{key:n},[isNaN(Number(i))?t("span",{class:"v-pagination__more"},[i.toString()]):e.genItem(t,i)])}))},genList:function(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render:function(t){var e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}})},4590:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(4503),a=(i(9653),i(6699),i(2564),i(1544)),s=i(8914),r=i(3276),o=i(6470),c=i(8386),l=i(4987),u=i(1050),d=i(6596);const h=(0,l.Z)(a.Z,s.Z,o.Z,(0,c.d)(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:function(t){return"string"===typeof t||!1===t}},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground:function(){return!this.text&&!this.outlined},isDark:function(){return this.hasBackground?!this.light:r.Z.options.computed.isDark.call(this)},styles:function(){if(this.absolute||!this.app)return{};var t=this.$vuetify.application,e=t.bar,i=t.bottom,n=t.footer,a=t.insetFooter,s=t.left,r=t.right,o=t.top;return{paddingBottom:(0,u.kb)(i+n+a),paddingLeft:(0,u.kb)(s),paddingRight:(0,u.kb)(r),paddingTop:(0,u.kb)(e+o)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted:function(){this.isActive&&this.setTimeout()},created:function(){this.$attrs.hasOwnProperty("auto-height")&&(0,d.Jk)("auto-height",this),0==this.timeout&&(0,d.Rn)('timeout="0"',"-1",this)},methods:{genActions:function(){return this.$createElement("div",{staticClass:"v-snack__action "},[(0,u.z9)(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent:function(){return this.$createElement("div",{staticClass:"v-snack__content",class:(0,n.Z)({},this.contentClass,!0),attrs:{role:"status","aria-live":"polite"}},[(0,u.z9)(this)])},genWrapper:function(){var t=this,e=this.hasBackground?this.setBackgroundColor:this.setTextColor,i=e(this.color,{staticClass:"v-snack__wrapper",class:a.Z.options.computed.classes.call(this),style:a.Z.options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:function(){return window.clearTimeout(t.activeTimeout)},pointerleave:this.setTimeout}});return this.$createElement("div",i,[this.genContent(),this.genActions()])},genTransition:function(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout:function(){var t=this;window.clearTimeout(this.activeTimeout);var e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout((function(){t.isActive=!1}),e))}},render:function(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},4363:(t,e,i)=>{var n=i(2109);n({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})}}]);