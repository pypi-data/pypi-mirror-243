{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DataLab",
  "oneOf": [
    {
      "type": "object",
      "required": [
        "v0"
      ],
      "properties": {
        "v0": {
          "$ref": "#/definitions/DataLabV0"
        }
      },
      "additionalProperties": false
    }
  ],
  "definitions": {
    "DataLabCompute": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "v0"
          ],
          "properties": {
            "v0": {
              "$ref": "#/definitions/DataLabComputeV0"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "DataLabComputeOrUnknown": {
      "anyOf": [
        {
          "$ref": "#/definitions/DataLabCompute"
        },
        {
          "type": "null"
        }
      ]
    },
    "DataLabComputeV0": {
      "type": "object",
      "required": [
        "authenticationRootCertificatePem",
        "driverEnclaveSpecification",
        "id",
        "matchingIdFormat",
        "name",
        "numEmbeddings",
        "publisherEmail",
        "pythonEnclaveSpecification"
      ],
      "properties": {
        "authenticationRootCertificatePem": {
          "type": "string"
        },
        "driverEnclaveSpecification": {
          "$ref": "#/definitions/EnclaveSpecification"
        },
        "id": {
          "type": "string"
        },
        "matchingIdFormat": {
          "$ref": "#/definitions/FormatType"
        },
        "matchingIdHashingAlgorithm": {
          "anyOf": [
            {
              "$ref": "#/definitions/HashingAlgorithm"
            },
            {
              "type": "null"
            }
          ]
        },
        "name": {
          "type": "string"
        },
        "numEmbeddings": {
          "type": "integer",
          "format": "uint",
          "minimum": 0.0
        },
        "publisherEmail": {
          "type": "string"
        },
        "pythonEnclaveSpecification": {
          "$ref": "#/definitions/EnclaveSpecification"
        }
      }
    },
    "DataLabV0": {
      "type": "object",
      "required": [
        "compute",
        "features",
        "provides"
      ],
      "properties": {
        "compute": {
          "$ref": "#/definitions/DataLabComputeOrUnknown"
        },
        "features": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "provides": {
          "$ref": "#/definitions/Requirements"
        }
      }
    },
    "EnclaveSpecification": {
      "type": "object",
      "required": [
        "attestationProtoBase64",
        "id",
        "workerProtocol"
      ],
      "properties": {
        "attestationProtoBase64": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "workerProtocol": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        }
      }
    },
    "FormatType": {
      "type": "string",
      "enum": [
        "STRING",
        "INTEGER",
        "FLOAT",
        "EMAIL",
        "DATE_ISO8601",
        "PHONE_NUMBER_E164",
        "HASH_SHA256_HEX"
      ]
    },
    "HashingAlgorithm": {
      "type": "string",
      "enum": [
        "SHA256_HEX"
      ]
    },
    "KnownOrUnknownRequirementFlagValue": {
      "anyOf": [
        {
          "$ref": "#/definitions/RequirementFlagValue"
        },
        {
          "type": "null"
        }
      ]
    },
    "RequirementFlag": {
      "type": "object",
      "required": [
        "details",
        "name"
      ],
      "properties": {
        "details": {
          "$ref": "#/definitions/KnownOrUnknownRequirementFlagValue"
        },
        "name": {
          "type": "string"
        }
      }
    },
    "RequirementFlagValue": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "SUPPORTED"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "DATASET"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "value"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "PROPERTY"
              ]
            },
            "value": {
              "type": "string"
            }
          }
        }
      ]
    },
    "Requirements": {
      "type": "object",
      "required": [
        "optional",
        "required"
      ],
      "properties": {
        "optional": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RequirementFlag"
          }
        },
        "required": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RequirementFlag"
          }
        }
      }
    }
  }
}