{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "LookalikeMediaDcrComputeV0",
  "description": "See the following diagram for a visualization of the graph: https://docs.google.com/drawings/d/13VfBcnhLmOlB_XBrekAmBtyi-zoThZdg1aKtJYVD2eA/edit?usp=sharing",
  "type": "object",
  "required": [
    "advertiserEmails",
    "agencyEmails",
    "authenticationRootCertificatePem",
    "driverEnclaveSpecification",
    "id",
    "mainAdvertiserEmail",
    "mainPublisherEmail",
    "matchingIdFormat",
    "name",
    "observerEmails",
    "publisherEmails",
    "pythonEnclaveSpecification"
  ],
  "properties": {
    "advertiserEmails": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "agencyEmails": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "authenticationRootCertificatePem": {
      "type": "string"
    },
    "driverEnclaveSpecification": {
      "$ref": "#/definitions/EnclaveSpecificationV0"
    },
    "hashMatchingIdWith": {
      "anyOf": [
        {
          "$ref": "#/definitions/HashingAlgorithm"
        },
        {
          "type": "null"
        }
      ]
    },
    "id": {
      "type": "string"
    },
    "mainAdvertiserEmail": {
      "type": "string"
    },
    "mainPublisherEmail": {
      "type": "string"
    },
    "matchingIdFormat": {
      "$ref": "#/definitions/FormatType"
    },
    "name": {
      "type": "string"
    },
    "observerEmails": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "publisherEmails": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "pythonEnclaveSpecification": {
      "$ref": "#/definitions/EnclaveSpecificationV0"
    },
    "rateLimitPublishDataNumPerWindow": {
      "default": 10,
      "type": "integer",
      "format": "uint32",
      "minimum": 0.0
    },
    "rateLimitPublishDataWindowSeconds": {
      "default": 604800,
      "type": "integer",
      "format": "uint32",
      "minimum": 0.0
    }
  },
  "definitions": {
    "EnclaveSpecificationV0": {
      "type": "object",
      "required": [
        "attestationProtoBase64",
        "id",
        "workerProtocol"
      ],
      "properties": {
        "attestationProtoBase64": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "workerProtocol": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        }
      }
    },
    "FormatType": {
      "type": "string",
      "enum": [
        "STRING",
        "INTEGER",
        "FLOAT",
        "EMAIL",
        "DATE_ISO8601",
        "PHONE_NUMBER_E164",
        "HASH_SHA256_HEX"
      ]
    },
    "HashingAlgorithm": {
      "type": "string",
      "enum": [
        "SHA256_HEX"
      ]
    }
  }
}