"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8436],{8436:(t,s,e)=>{e.d(s,{Z:()=>et});var i=e(6252),o=e(3577);const a={class:"text-instructions"},r={key:0,class:"alert alert-dark"},l={key:1,class:"group-card-list"},n={class:"group-card--details"},d={key:0,class:"group-card--remove"},c=(0,i._)("div",{class:"spacer"},null,-1),u={class:"row submit-row"},h={class:"col-md-12"},p=(0,i._)("hr",null,null,-1),g={class:"text-instructions"},m={key:2,class:"alert alert-dark"},_={key:3,class:"user-card-list"},v=["src"],U={class:"user-card--details"},b={class:"user-card--name"},w={class:"user-card--email"},L={key:0,class:"user-card--remove"},y=(0,i._)("div",{class:"spacer"},null,-1),f={class:"row submit-row"},k={class:"col-md-12"};var D=e(3058),S=e(5808),$=e(6542),x=e(9669),I=e.n(x),G=e(3138);const M={class:"modal fade",id:"addGroupModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},A={class:"modal-dialog modal-lg"},C={class:"modal-content"},W={class:"modal-header"},B=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addGroupCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),E={class:"modal-body"},Z={key:0,class:"row"},R={class:"col-md-4"},T=(0,i._)("strong",null,"Add Groups",-1),q={class:"text-instructions"},N={class:"text-instructions"},j={class:"col-md-8"},O={key:1,class:"row"},F=(0,i._)("div",{class:"col-md-6"},[(0,i._)("strong",null,"Sorry - no results"),(0,i._)("p",{class:"text-instructions"}," This could be because "),(0,i._)("ul",{class:"text-instructions"},[(0,i._)("li",null,"There are no more groups left to add")])],-1),P={class:"col-md-6 no-search"},z=["src"],J={class:"modal-footer"},H=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),K=["disabled"];var Y=e(1317),Q=e(989);const V=e(9669),X={name:"AddGroupWizard",components:{Icon:$.JO,NSelect:Y.Z},inject:["nextTick"],computed:{...(0,Q.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[D.Z,S.Z],data:()=>({groupFixList:[],groupModel:[]}),methods:{addGroup(){const t=new FormData;this.groupModel.forEach((s=>{t.append("group_list",s)})),V.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_group/`,t).then((t=>{this.$emit("update_group_list",t.data),document.getElementById("addGroupCloseButton").click(),this.getGroupList()})).catch((t=>{this.showErrorModal(t,this.destination)}))},getGroupList(){V.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/group_list_all/`).then((t=>{this.groupFixList=t.data.map((t=>({value:t.pk,label:t.fields.group_name})))})).catch((t=>{this.showErrorModal(t,this.destination)}))}},mounted(){this.nextTick((()=>{this.getGroupList()}))}};var tt=e(3744);const st={name:"GroupsAndUsersModule",components:{AddGroupWizard:(0,tt.Z)(X,[["render",function(t,s,e,a,r,l){const n=(0,i.up)("Icon"),d=(0,i.up)("n-select");return(0,i.wg)(),(0,i.iD)("div",M,[(0,i._)("div",A,[(0,i._)("div",C,[(0,i._)("div",W,[(0,i._)("h2",null,[(0,i.Wm)(n,{icon:t.icons.groupPresentation},null,8,["icon"]),(0,i.Uk)(" Add Group Wizard ")]),B]),(0,i._)("div",E,[r.groupFixList.length>0?((0,i.wg)(),(0,i.iD)("div",Z,[(0,i._)("div",R,[T,(0,i._)("p",q," Use the following multiple select to select which groups you want to add to this "+(0,o.toDisplayString)(t.destination)+". ",1),(0,i._)("p",N," Please note: A user's group has to be added to the "+(0,o.toDisplayString)(t.destination)+" before the user can be added. ",1)]),(0,i._)("div",j,[(0,i.Wm)(d,{options:r.groupFixList,value:r.groupModel,"onUpdate:value":s[0]||(s[0]=t=>r.groupModel=t),multiple:""},null,8,["options","value"])])])):((0,i.wg)(),(0,i.iD)("div",O,[F,(0,i._)("div",P,[(0,i._)("img",{src:`${t.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,z)])]))]),(0,i._)("div",J,[H,(0,i._)("button",{type:"button",class:"btn btn-primary",disabled:0==r.groupModel.length,onClick:s[1]||(s[1]=(...t)=>l.addGroup&&l.addGroup(...t))}," Add Group(s) ",8,K)])])])])}]]),AddUserWizard:e(3695).Z,Icon:$.JO},inject:["nextTick"],computed:{...(0,Q.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"})},mixins:[D.Z,S.Z],data:()=>({groupList:[],refreshUserListBoolean:!1,userList:[]}),methods:{addNewGroup(){new G.u_(document.getElementById("addGroupModal")).show()},addNewUser(){new G.u_(document.getElementById("addUserModal")).show()},getGroupList(){I().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/group_list/`).then((t=>{this.groupList=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},getUserList(){I().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/user_list/`).then((t=>{this.userList=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},profilePicture(t){return null!==t&&""!==t?`${this.rootUrl}private/${t}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`},removeGroup(t){const s=new FormData;s.set("group_id",t),I().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_group/`,s).then((()=>{let s=JSON.parse(JSON.stringify(this.groupList));this.groupList=s.filter((s=>s.pk!==t))})).catch((t=>{this.showErrorModal(t,this.destination)}))},removeUser(t){this.userList=this.userList.filter((s=>s.username!==t));const s=new FormData;s.set("username",t),I().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_user/`,s).catch((t=>{this.showErrorModal(t,this.destination)}))},resetRefreshUserList(){this.refreshUserListBoolean=!1},updateGroupList(t){this.groupList=t,this.refreshUserListBoolean=!0},updateUserList(t){this.userList=t}},mounted(){this.nextTick((()=>{this.getGroupList(),this.getUserList()}))}},et=(0,tt.Z)(st,[["render",function(t,s,e,D,S,$){const x=(0,i.up)("Icon"),I=(0,i.up)("add-group-wizard"),G=(0,i.up)("add-user-wizard");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.kq)(" GROUPS "),(0,i._)("h2",null,[(0,i.Wm)(x,{icon:t.icons.groupPresentation},null,8,["icon"]),(0,i.Uk)(" Groups")]),(0,i._)("p",a," The following list are all the Groups connected to this "+(0,o.toDisplayString)(t.destination)+". Users will have to be included in these groups to be added to this "+(0,o.toDisplayString)(t.destination),1),0==S.groupList.length?((0,i.wg)(),(0,i.iD)("div",r," Sorry - there are no groups active. ")):((0,i.wg)(),(0,i.iD)("div",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(S.groupList,(s=>((0,i.wg)(),(0,i.iD)("div",{key:s.pk,class:"group-card"},[(0,i._)("div",n,(0,o.toDisplayString)(s.fields.group_name),1),t.userLevel>=3?((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(x,{icon:t.icons.trashCan,onClick:t=>$.removeGroup(s.pk)},null,8,["icon","onClick"])])):(0,i.kq)("v-if",!0)])))),128))])),c,(0,i.kq)(" ADD GROUP "),(0,i.kq)(" TO DO - limit it to certain users "),(0,i._)("div",u,[(0,i._)("div",h,[t.userLevel>1?((0,i.wg)(),(0,i.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:s[0]||(s[0]=(...t)=>$.addNewGroup&&$.addNewGroup(...t))},"Add Group to "+(0,o.toDisplayString)(t.destination),1)):(0,i.kq)("v-if",!0)])]),p,(0,i.kq)(" USERS "),(0,i._)("h2",null,[(0,i.Wm)(x,{icon:t.icons.userIcon},null,8,["icon"]),(0,i.Uk)(" Users")]),(0,i._)("p",g," The following are a list of users who are connected to this "+(0,o.toDisplayString)(t.destination)+". Please note - users have to be a part of the groups list above. ",1),0==S.userList.length?((0,i.wg)(),(0,i.iD)("div",m," Sorry - there are no current users active. ")):((0,i.wg)(),(0,i.iD)("div",_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(S.userList,(s=>((0,i.wg)(),(0,i.iD)("div",{key:s.username,class:"user-card"},[(0,i._)("img",{src:$.profilePicture(s.profile_picture),alt:"default profile",class:"user-card--profile"},null,8,v),(0,i._)("div",U,[(0,i._)("div",b,(0,o.toDisplayString)(s.first_name)+" "+(0,o.toDisplayString)(s.last_name),1),(0,i._)("div",w,(0,o.toDisplayString)(s.email),1)]),t.userLevel>=3?((0,i.wg)(),(0,i.iD)("div",L,[(0,i.Wm)(x,{icon:t.icons.trashCan,onClick:t=>$.removeUser(s.username)},null,8,["icon","onClick"])])):(0,i.kq)("v-if",!0)])))),128))])),y,(0,i.kq)(" TO DO - limit it to certain users "),(0,i._)("div",f,[(0,i._)("div",k,[t.userLevel>1?((0,i.wg)(),(0,i.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:s[1]||(s[1]=(...t)=>$.addNewUser&&$.addNewUser(...t))},"Add User to "+(0,o.toDisplayString)(t.destination),1)):(0,i.kq)("v-if",!0)])]),(0,i.kq)(" MODALS "),(0,i.kq)(" ADD GROUPS WIZARD "),(0,i.Wm)(I,{destination:t.destination,"location-id":t.locationId,onUpdate_group_list:s[2]||(s[2]=t=>$.updateGroupList(t))},null,8,["destination","location-id"]),(0,i.kq)(" ADD USER WIZARD "),(0,i.Wm)(G,{destination:t.destination,"location-id":t.locationId,"refresh-user-list":S.refreshUserListBoolean,onUpdate_user_list:s[3]||(s[3]=t=>$.updateUserList(t)),onReset_refresh_user_list:s[4]||(s[4]=t=>$.resetRefreshUserList(t))},null,8,["destination","location-id","refresh-user-list"])])}]])},3695:(t,s,e)=>{e.d(s,{Z:()=>Z});var i=e(6252),o=e(3577);const a={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r={class:"modal-dialog modal-lg"},l={class:"modal-content"},n={class:"modal-header"},d=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),c={class:"modal-body"},u={key:0,class:"row"},h={class:"col-md-4"},p=(0,i._)("strong",null,"Add Users",-1),g={class:"text-instructions"},m={class:"text-instructions"},_={class:"col-md-8"},v={key:1,class:"row"},U={class:"col-md-6"},b=(0,i._)("strong",null,"Sorry - no results",-1),w=(0,i._)("p",{class:"text-instructions"}," This could be because ",-1),L={class:"text-instructions"},y=(0,i._)("li",null,"There are no more users left to add",-1),f={class:"col-md-6 no-search"},k=["src"],D={class:"modal-footer"},S=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),$=["disabled"];var x=e(9669),I=e.n(x),G=e(6542),M=e(1317),A=e(3138),C=e(989),W=e(3058),B=e(5808);const E={name:"AddUserWizard",components:{Icon:G.JO,NSelect:M.Z},inject:["nextTick"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0},refreshUserList:{type:Boolean,default:!1}},mixins:[W.Z,B.Z],computed:{...(0,C.Se)({rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),methods:{addUser(){const t=new FormData;this.userModel.forEach((s=>{t.append("user_list",s)})),I().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_user/`,t).then((t=>{this.$emit("update_user_list",t.data),document.getElementById("addUserCloseButton").click(),this.userModel=[],this.getUserList(),"kanban_card"===this.destination&&(this.$store.commit({type:"updateUserList",userList:t.data}),new A.u_(document.getElementById("cardInformationModal")).show())})).catch((t=>{this.showErrorModal(t,this.destination)}))},getUserList(){if(""===this.destination||0===this.locationId||this.userLevel<=1)return;let t=`${this.rootUrl}object_data/${this.destination}/${this.locationId}/user_list_all/`;I().post(t).then((t=>{this.userFixList=t.data.map((t=>({value:t.id,label:`${t.username}: ${t.first_name} ${t.last_name}`})))}))}},watch:{refreshUserList(){this.refreshUserList&&this.getUserList(),this.$emit("reset_refresh_user_list")}},mounted(){this.nextTick((()=>{this.getUserList()}))}},Z=(0,e(3744).Z)(E,[["render",function(t,s,e,x,I,G){const M=(0,i.up)("Icon"),A=(0,i.up)("n-select");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",r,[(0,i._)("div",l,[(0,i._)("div",n,[(0,i._)("h2",null,[(0,i.Wm)(M,{icon:t.icons.userIcon},null,8,["icon"]),(0,i.Uk)(" Add User Wizard ")]),d]),(0,i._)("div",c,[I.userFixList.length>0?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",h,[p,(0,i._)("p",g," Use the following multiple select to select which users you want to add to this "+(0,o.toDisplayString)(e.destination)+". ",1),(0,i._)("p",m," Please note: A user's group has to be added to the "+(0,o.toDisplayString)(e.destination)+" before the user can be added. ",1)]),(0,i._)("div",_,[(0,i.Wm)(A,{options:I.userFixList,value:I.userModel,"onUpdate:value":s[0]||(s[0]=t=>I.userModel=t),multiple:""},null,8,["options","value"])])])):((0,i.wg)(),(0,i.iD)("div",v,[(0,i._)("div",U,[b,w,(0,i._)("ul",L,[y,(0,i._)("li",null," The user you are after is in a group not current added to this "+(0,o.toDisplayString)(e.destination),1)])]),(0,i._)("div",f,[(0,i._)("img",{src:`${t.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,k)])]))]),(0,i._)("div",D,[S,(0,i._)("button",{type:"button",class:"btn btn-primary",disabled:0===I.userModel.length,onClick:s[1]||(s[1]=(...t)=>G.addUser&&G.addUser(...t))}," Add User(s) ",8,$)])])])])}]])}}]);