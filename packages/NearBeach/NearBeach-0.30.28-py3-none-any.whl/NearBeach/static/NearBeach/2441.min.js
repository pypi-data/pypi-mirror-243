"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[2441],{866:(t,e,o)=>{o.d(e,{Z:()=>b});var s=o(6252),i=o(3577);const a={class:"customer-list"},n=["src"],l={class:"customer-card--details"},d={class:"customer-card--name"},r=["href"],c={class:"customer-card--email"},u={key:0,class:"customer-card--remove"};var m=o(6542),g=o(5808),h=o(989);const p=o(9669),_={name:"CustomersListModule",components:{Icon:m.JO},props:{customerResults:{type:Array,default:()=>[]}},computed:{...(0,h.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"}),defaultCustomerImage(){return`${this.staticUrl}/NearBeach/images/placeholder/people_tax.svg`}},mixins:[g.Z],data:()=>({}),methods:{getCustomerImage(t){const e=t.fields.customer_profile_picture;return""===e||null===e?this.defaultCustomerImage:`${this.rootUrl}private/${e}`},removeCustomer(t){const e=new FormData;e.set("customer_id",t),p.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_customer/`,e).then((()=>{this.$emit("remove_customer",t)}))}}},b=(0,o(3744).Z)(_,[["render",function(t,e,o,m,g,h){const p=(0,s.up)("Icon");return(0,s.wg)(),(0,s.iD)("div",a,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.customerResults,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.pk,class:"customer-card"},[(0,s.kq)(" CUSOMER PROFILE "),(0,s._)("img",{src:h.getCustomerImage(e),alt:"default profile picture"},null,8,n),(0,s.kq)(" CUSTOMER DETAILS "),(0,s._)("div",l,[(0,s._)("div",d,[(0,s._)("a",{href:`${t.rootUrl}customer_information/${e.pk}/`},(0,i.toDisplayString)(e.fields.customer_first_name)+" "+(0,i.toDisplayString)(e.fields.customer_last_name),9,r)]),(0,s._)("div",c,[(0,s.Wm)(p,{icon:t.icons.mailIcon},null,8,["icon"]),(0,s.Uk)(" "+(0,i.toDisplayString)(e.fields.customer_email),1)])]),t.userLevel>=2?((0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(p,{icon:t.icons.trashCan,onClick:t=>h.removeCustomer(e.pk)},null,8,["icon","onClick"])])):(0,s.kq)("v-if",!0)])))),128))])}]])},8448:(t,e,o)=>{o.d(e,{Z:()=>E});var s=o(6252),i=o(3577);const a=(0,s._)("h2",null,"Assigned Tags",-1),n={class:"text-instructions"},l={class:"tag-list"},d=["onClick"],r=(0,s._)("hr",null,null,-1),c={class:"row submit-row"},u={class:"col-md-12"};var m=o(3138),g=o(6542),h=o(5808);const p={class:"modal fade",id:"addTagModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},_={class:"modal-dialog"},b={class:"modal-content"},v={class:"modal-header"},y=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addTagsCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),w={class:"modal-body"},f={class:"row"},k={class:"col-md-4"},T=(0,s._)("strong",null,"Add Tag",-1),N={class:"text-instructions"},I={class:"col-md-8"},D=(0,s._)("label",null,"All Tag List",-1),U={class:"modal-footer"},L=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var C=o(3058),M=o(9669),S=o.n(M),$=o(1317),A=o(989);const R={name:"AddTagWizard",components:{Icon:g.JO,NSelect:$.Z},props:{assignedTags:{type:Array,default:()=>[]},destination:{type:String,default:""},locationId:{type:Number,default:0}},mixins:[C.Z,h.Z],data:()=>({allTagList:[],tagModel:[]}),computed:{...(0,A.Se)({rootUrl:"getRootUrl"}),tagList(){return this.allTagList.filter((t=>this.assignedTags.findIndex((e=>e.pk===parseInt(t.value)))<0))}},methods:{addTag(){const t=new FormData;this.tagModel.forEach((e=>{t.append("tag_id",e)})),S().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_tags/`,t).then((t=>{this.$emit("add_tags",t.data),document.getElementById("addTagsCloseButton").click(),this.tagModel=[]}))},getTagList(){S().post(`${this.rootUrl}object_data/tag_list_all/`).then((t=>{this.allTagList=t.data.map((t=>({value:t.pk,label:t.fields.tag_name})))})).catch((t=>{}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||setTimeout((()=>{this.getTagList()}),200)}};var x=o(3744);const Z=(0,x.Z)(R,[["render",function(t,e,o,a,n,l){const d=(0,s.up)("Icon"),r=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",_,[(0,s._)("div",b,[(0,s._)("div",v,[(0,s._)("h2",null,[(0,s.Wm)(d,{icon:t.icons.usersIcon},null,8,["icon"]),(0,s.Uk)(" Add Tags Wizard ")]),y]),(0,s._)("div",w,[(0,s._)("div",f,[(0,s._)("div",k,[T,(0,s._)("p",N," Use the dropdown to select one or many lables to add to the "+(0,i.toDisplayString)(o.destination)+". ",1)]),(0,s._)("div",I,[D,(0,s.Wm)(r,{label:"tag",multiple:"",options:l.tagList,value:n.tagModel,"onUpdate:value":e[0]||(e[0]=t=>n.tagModel=t)},null,8,["options","value"])])])]),(0,s._)("div",U,[L,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>l.addTag&&l.addTag(...t))}," Add Tag ")])])])])}]]),H=o(9669),O={name:"ListTagsModule",components:{AddTagWizard:Z,Icon:g.JO},data:()=>({tagList:[]}),mixins:[h.Z],computed:{...(0,A.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{addTags(t){this.tagList=t},createNewTag(){new m.u_(document.getElementById("addTagModal")).show()},getAssignedTags(){H.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/tag_list/`).then((t=>{this.tagList=t.data})).catch((t=>{}))},removeTag(t){const e=new FormData;e.set("tag",t),e.set("object_enum",this.destination),e.set("object_id",this.locationId),H.post(`${this.rootUrl}object_data/delete_tag/`,e).then((e=>{this.tagList=this.tagList.filter((e=>e.pk!==t))})).catch((t=>{}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||setTimeout((()=>{this.getAssignedTags()}),200)}},W={name:"MiscModule",components:{ListTagsModule:(0,x.Z)(O,[["render",function(t,e,o,m,g,h){const p=(0,s.up)("Icon"),_=(0,s.up)("add-tag-wizard");return(0,s.wg)(),(0,s.iD)("div",null,[a,(0,s._)("p",n," Here are all tags associated with this "+(0,i.toDisplayString)(t.destination)+'. You can add more tags by clicking on the "Add Tag" button. ',1),(0,s._)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.tagList,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.pk,class:"single-tag",style:(0,i.normalizeStyle)(`background-color: ${e.fields.tag_colour};`)},[(0,s.Uk)((0,i.toDisplayString)(e.fields.tag_name)+" ",1),t.userLevel>1?((0,s.wg)(),(0,s.iD)("span",{key:0,onClick:t=>h.removeTag(e.pk)},[(0,s.Wm)(p,{icon:t.icons.xCircle},null,8,["icon"])],8,d)):(0,s.kq)("v-if",!0)],4)))),128))]),(0,s.kq)(" ADD TAG BUTTON "),r,(0,s._)("div",c,[(0,s._)("div",u,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>h.createNewTag&&h.createNewTag(...t))},"Add Tag to "+(0,i.toDisplayString)(t.destination),1)):(0,s.kq)("v-if",!0)])]),(0,s.kq)(" ADD TAG MODULE "),(0,s.Wm)(_,{destination:t.destination,"location-id":t.locationId,"assigned-tags":g.tagList,onAdd_tags:e[1]||(e[1]=t=>h.addTags(t))},null,8,["destination","location-id","assigned-tags"])])}]])},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},mixins:[],computed:{},data:()=>({noteHistoryResults:[]}),methods:{},mounted(){}},E=(0,x.Z)(W,[["render",function(t,e,o,i,a,n){const l=(0,s.up)("list-tags-module");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{destination:o.destination,"location-id":o.locationId},null,8,["destination","location-id"])])}]])},2554:(t,e,o)=>{o.d(e,{Z:()=>$});var s=o(6252),i=o(3577);const a={class:"text-instructions"},n=(0,s._)("hr",null,null,-1),l={class:"row submit-row"},d={class:"col-md-12"};var r=o(3138),c=o(3058),u=o(5808),m=o(9669),g=o.n(m),h=o(6542),p=o(6182);const _={class:"modal fade",id:"newNoteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},b={class:"modal-dialog modal-lg",role:"document"},v={class:"modal-content"},y={class:"modal-header"},w=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newNoteCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),f={class:"modal-body"},k=(0,s._)("p",{class:"text-instructions"}," Use the text editor to type out your note. Click on the submit button to submit the note. ",-1),T={class:"modal-footer"},N=["disabled"],I=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var D=o(7267),U=o(989);const L={name:"NewHistoryNoteWizard",components:{editor:D.Z,Icon:h.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},mixins:[c.Z,u.Z],data:()=>({newNoteModel:""}),computed:{...(0,U.Se)({rootUrl:"getRootUrl"})},methods:{submitNote(){const t=new FormData;t.set("destination",this.destination),t.set("location_id",this.locationId),t.set("note",this.newNoteModel),g().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_notes/`,t).then((t=>{this.$emit("update_note_history_results",t.data),document.getElementById("newNoteCloseButton").click()})).catch((t=>{this.showErrorModal(t,this.destination)}))}}};var C=o(3744);const M=(0,C.Z)(L,[["render",function(t,e,o,i,a,n){const l=(0,s.up)("Icon"),d=(0,s.up)("editor");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.kq)(" NEW HISTORY NOTE "),(0,s._)("div",_,[(0,s._)("div",b,[(0,s._)("div",v,[(0,s._)("div",y,[(0,s._)("h2",null,[(0,s.Wm)(l,{icon:t.icons.noteAdd},null,8,["icon"]),(0,s.Uk)(" New Note")]),w]),(0,s._)("div",f,[k,(0,s.Wm)(d,{init:{height:300,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:a.newNoteModel,"onUpdate:modelValue":e[0]||(e[0]=t=>a.newNoteModel=t)},null,8,["modelValue"])]),(0,s._)("div",T,[(0,s._)("button",{type:"button",class:"btn btn-primary",disabled:""==a.newNoteModel,onClick:e[1]||(e[1]=(...t)=>n.submitNote&&n.submitNote(...t))}," Submit Note ",8,N),I])])])])],2112)}]]),S={name:"NotesModule",components:{Icon:h.JO,ListNotes:p.Z,NewHistoryNoteWizard:M},mixins:[c.Z,u.Z],data:()=>({noteHistoryResults:[]}),computed:{...(0,U.Se)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{createNewNote(){new r.u_(document.getElementById("newNoteModal")).show()},getNoteHistoryResults(){g().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/note_list/`).then((t=>{this.noteHistoryResults=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateNoteHistoryResults(t){this.noteHistoryResults.push(t[0])}},mounted(){setTimeout((()=>{this.getNoteHistoryResults()}),200)}},$=(0,C.Z)(S,[["render",function(t,e,o,r,c,u){const m=(0,s.up)("Icon"),g=(0,s.up)("list-notes"),h=(0,s.up)("new-history-note-wizard");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,[(0,s.Wm)(m,{icon:t.icons.noteAdd},null,8,["icon"]),(0,s.Uk)(" Note History")]),(0,s._)("p",a," The following are saved notes against this "+(0,i.toDisplayString)(t.destination)+". Add notes by clicking on the button below. ",1),(0,s.Wm)(g,{"note-history-results":c.noteHistoryResults,destination:t.destination},null,8,["note-history-results","destination"]),(0,s.kq)(" ADD NOTE HISTORY "),(0,s.kq)(" TO DO - limit it to certain users "),n,(0,s._)("div",l,[(0,s._)("div",d,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>u.createNewNote&&u.createNewNote(...t))},"Add Note to "+(0,i.toDisplayString)(t.destination),1)):(0,s.kq)("v-if",!0)])]),(0,s.kq)(" Modals for Notes section "),(0,s.Wm)(h,{"location-id":t.locationId,destination:t.destination,onUpdate_note_history_results:e[1]||(e[1]=t=>u.updateNoteHistoryResults(t))},null,8,["location-id","destination"])])}]])}}]);