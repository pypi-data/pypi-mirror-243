"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1372],{605:(e,t,o)=>{o.d(t,{Z:()=>Xe});var i=o(6252),d=o(3577);const n={class:"text-instructions"},l={key:0,class:"module-spacer"},s=[(0,i._)("div",{class:"alert alert-dark"}," Sorry - there are no documents or folders uploaded. ",-1)],a={key:1,class:"document--widget"},r=(0,i._)("p",{class:"text-instructions"},"Go to Parent Directory...",-1),c=["onClick"],u={class:"text-instructions"},m=["href"],p={class:"text-instructions"},h={key:0,class:"document--remove"},g=(0,i._)("hr",null,null,-1),_={key:2,class:"btn-group save-changes"},f={key:0,class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},D={class:"dropdown-menu"};var y=o(3138),b=o(6542),k=o(9963);const v={class:"modal fade",id:"addFolderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},F={class:"modal-dialog modal-lg"},L={class:"modal-content"},w={class:"modal-header"},x=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addFolderCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),U={class:"modal-body"},M={class:"row"},I=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"Creating a folder"),(0,i._)("p",{class:"text-instructions"},' Give the folder an appropriate name. When done, click on the "Save" button. It will be added to the current folder. ')],-1),S={class:"col-md-8"},C={class:"form-group"},E=(0,i._)("label",{for:"folder_description"},"Folder Name",-1),$={class:"modal-footer"},Z=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),T=["disabled"];var B=o(989),A=o(3058),N=o(5808);const R={name:"AddFolderWizard",components:{Icon:b.JO},props:{currentFolder:{type:String,default:"/"},destination:{type:String,default:"/"},existingFolders:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[A.Z,N.Z],data:()=>({disableAddFolderButton:!0,folderDescriptionModel:""}),computed:{...(0,B.Se)({rootUrl:"getRootUrl"})},methods:{addFolder(){const e=new FormData;e.set("folder_description",this.folderDescriptionModel),null!==this.currentFolder&&""!==this.currentFolder&&e.set("parent_folder",this.currentFolder),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_folder/`,e).then((e=>{this.$emit("update_folder_list",e.data),this.folderDescriptionModel="",document.getElementById("addFolderCloseButton").click()})).catch((e=>{this.showErrorModal(e,this.destination)}))}},updated(){const e=this.existingFolders.filter((e=>e.fields.folder_description===this.folderDescriptionModel));this.disableAddFolderButton=e.length>0||""===this.folderDescriptionModel||null===this.folderDescriptionModel}};var O=o(3744);const W=(0,O.Z)(R,[["render",function(e,t,o,d,n,l){const s=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",v,[(0,i._)("div",F,[(0,i._)("div",L,[(0,i._)("div",w,[(0,i._)("h2",null,[(0,i.Wm)(s,{icon:e.icons.userIcon},null,8,["icon"]),(0,i.Uk)(" Add Folder Wizard ")]),x]),(0,i._)("div",U,[(0,i._)("div",M,[I,(0,i._)("div",S,[(0,i._)("div",C,[E,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.folderDescriptionModel=e),class:"form-control",id:"folder_description",maxlength:"50"},null,512),[[k.vModelText,n.folderDescriptionModel]])])])])]),(0,i._)("div",$,[Z,(0,i._)("button",{type:"button",class:"btn btn-primary",disabled:n.disableAddFolderButton,onClick:t[1]||(t[1]=(...e)=>l.addFolder&&l.addFolder(...e))}," Add Folder ",8,T)])])])])}]]),P={class:"modal fade",id:"addLinkModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},q={class:"modal-dialog modal-lg"},z={class:"modal-content"},H={class:"modal-header"},K=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addLinkCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),V={class:"modal-body"},Y={class:"row"},j=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"Add Link"),(0,i._)("p",{class:"text-instruction"}," Add hyperlinks to other documents and sources located in on the internet/cloud. ")],-1),G={class:"col-md-8"},J={class:"form-group"},Q={for:"document_description"},X={key:0,class:"error"},ee={class:"form-group"},te={for:"document_url_location"},oe={class:"modal-footer"},ie=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),de=["disabled"];var ne=o(5705),le=o(760),se=o(7939);const ae={name:"AddLinkWizard",setup:()=>({v$:(0,ne.ZP)()}),components:{Icon:b.JO,ValidationRendering:se.Z},props:{currentFolder:{type:String,default:"/"},destination:{type:String,default:"/"},excludeDocuments:{type:Array,default:()=>[]},existingFolders:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[A.Z,N.Z],data:()=>({linkModel:"",disableAddButton:!0,documentDescriptionModel:"",documentUrlLocationModel:"",duplicateDescription:!1}),validations:{documentDescriptionModel:{required:le.C1},documentUrlLocationModel:{required:le.C1,url:le.HQ}},computed:{...(0,B.Se)({rootUrl:"getRootUrl"})},methods:{addLink(){const e=new FormData;e.set("document_description",this.documentDescriptionModel),e.set("document_url_location",this.documentUrlLocationModel),null!==this.currentFolder&&""!==this.currentFolder&&e.set("parent_folder",this.currentFolder),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_link/`,e).then((e=>{this.$emit("update_document_list",e.data),this.documentDescriptionModel="",this.documentUrlLocationModel="",document.getElementById("addLinkCloseButton").click()})).catch((e=>{this.showErrorModal(e,this.destination)}))}},updated(){const e=this.excludeDocuments.filter((e=>e.document_key__document_description===this.documentDescriptionModel));this.duplicateDescription=e.length>0,this.v$.$touch(),this.disableAddButton=this.v$.$invalid||e.length>0}},re=(0,O.Z)(ae,[["render",function(e,t,o,d,n,l){const s=(0,i.up)("Icon"),a=(0,i.up)("validation-rendering");return(0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("div",q,[(0,i._)("div",z,[(0,i._)("div",H,[(0,i._)("h2",null,[(0,i.Wm)(s,{icon:e.icons.userIcon},null,8,["icon"]),(0,i.Uk)(" Add Link Wizard ")]),K]),(0,i._)("div",V,[(0,i._)("div",Y,[j,(0,i._)("div",G,[(0,i._)("div",J,[(0,i._)("label",Q,[(0,i.Uk)(" Document Description "),(0,i.Wm)(a,{"error-list":d.v$.documentDescriptionModel.$errors},null,8,["error-list"]),n.duplicateDescription?((0,i.wg)(),(0,i.iD)("span",X," Sorry - but this is a duplicated description.")):(0,i.kq)("v-if",!0)]),(0,i.wy)((0,i._)("input",{id:"document_description","onUpdate:modelValue":t[0]||(t[0]=e=>n.documentDescriptionModel=e),class:"form-control",maxlength:"50",placeholder:"NearBeach Homepage"},null,512),[[k.vModelText,n.documentDescriptionModel]])]),(0,i._)("div",ee,[(0,i._)("label",te,[(0,i.Uk)(" Document URL "),(0,i.Wm)(a,{"error-list":d.v$.documentUrlLocationModel.$errors},null,8,["error-list"])]),(0,i.wy)((0,i._)("input",{id:"document_url_location","onUpdate:modelValue":t[1]||(t[1]=e=>n.documentUrlLocationModel=e),class:"form-control",placeholder:"https://nearbeach.org"},null,512),[[k.vModelText,n.documentUrlLocationModel]])])])])]),(0,i._)("div",oe,[ie,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>l.addLink&&l.addLink(...e)),disabled:n.disableAddButton}," Add Link ",8,de)])])])])}]]),ce={class:"modal fade",id:"confirmFileDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmFileDelete","aria-hidden":"true"},ue={class:"modal-dialog"},me={class:"modal-content"},pe=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"confirmFileDelete"}," Please confirm File Deletion "),(0,i.kq)(" TASK INFORMATION "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmFileDeleteButton"})],-1),he=(0,i._)("div",{class:"modal-body"}," Are you sure you want to delete the file? ",-1),ge={class:"modal-footer"},_e={name:"ConfirmFileDelete",props:{documentKey:{type:String,default:""}},computed:{...(0,B.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{deleteFile(){const e=new FormData;e.set("document_key",this.documentKey),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/remove/`,e).then((()=>{this.$emit("remove_document",{document_key:this.documentKey})})).catch((e=>{})),this.closeModal()},closeModal(){document.getElementById("confirmFileDeleteButton").click()}}},fe=(0,O.Z)(_e,[["render",function(e,t,o,d,n,l){return(0,i.wg)(),(0,i.iD)("div",ce,[(0,i._)("div",ue,[(0,i._)("div",me,[pe,he,(0,i._)("div",ge,[(0,i._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.deleteFile&&l.deleteFile(...e))}," Yes ")])])])])}]]),De={class:"modal fade",id:"uploadDocumentModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ye={class:"modal-dialog modal-lg"},be={class:"modal-content"},ke={class:"modal-header"},ve=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"uploadDocumentCloseButton"},[(0,i._)("span",{"aria-hidden":"true"})],-1),Fe={class:"modal-body"},Le={class:"row"},we={class:"col-md-4"},xe=(0,i._)("strong",null,"Uploading File",-1),Ue={class:"text-instructions"},Me={key:0},Ie={key:1},Se={key:2},Ce={class:"col-md-8"},Ee={key:0,class:"form-file"},$e={class:"mb-3"},Ze={for:"document",class:"form-label"},Te=(0,i._)("br",null,null,-1),Be={key:0,class:"alert alert-warning"},Ae=["accept"],Ne={key:1,class:"form-group"},Re={class:"form-group"},Oe=(0,i._)("label",{for:"documentDescription"},"Document Description",-1),We=(0,i._)("br",null,null,-1),Pe={class:"form-row"},qe={key:2},ze={key:0,class:"alert alert-warning"},He=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Ke=(0,i._)("div",{class:"alert alert-success"}," The document has been uploaded. The server is currently writing the file to disk. Please be patient - this modal will close automatically. Thank you ",-1),Ve={class:"modal-footer"},Ye=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),je=["disabled"],Ge={name:"UploadDocumentWizard",components:{Icon:b.JO},props:{acceptedDocuments:{type:String,default:"image/*,text/*,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"},currentFolder:{type:String,default:""},destination:{type:String,default:""},excludeDocuments:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[N.Z],data:()=>({disableUploadButton:!0,documentModel:[],documentDescriptionModel:"",uploadPercentage:"",maxUploadSize:0,maxUploadString:"No Upload Limit",maxUploadWarning:!1}),computed:{...(0,B.Se)({staticUrl:"getStaticUrl",rootUrl:"getRootUrl"})},methods:{handleFileUploads(e){e[0].size*(0!==this.maxUploadSize)>this.maxUploadSize?this.maxUploadWarning=!0:(this.maxUploadWarning=!1,this.documentModel=e[0],this.documentDescriptionModel=e[0].name)},resetForm(){this.documentModel="",this.documentDescriptionModel="",this.uploadPercentage=""},uploadFile(){const e=new FormData;e.set("document",this.documentModel,this.documentDescriptionModel),e.set("document_description",this.documentDescriptionModel),""!==this.currentFolder&&null!==this.currentFolder&&e.set("parent_folder",this.currentFolder);const t={onUploadProgress:e=>{this.uploadPercentage=parseFloat(e.loaded)/parseFloat(e.total)}};this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/upload/`,e,t).then((e=>{this.$emit("update_document_list",e.data),document.getElementById("uploadDocumentCloseButton").click(),this.resetForm()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to upload documentation",message:`Can not upload the documentation. ${e}`,extra_classes:"bg-danger",delay:0})}))}},watch:{maxUploadSize(){if(0===this.maxUploadSize)return"No Upload Limit";const e=Math.floor(Math.log(this.maxUploadSize)/Math.log(1024));this.maxUploadString=`Max Upload Size: ${parseFloat((this.maxUploadSize/Math.pow(1024,e)).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}`}},updated(){const e=this.excludeDocuments.filter((e=>e.document_key__document_description===this.documentDescriptionModel));this.disableUploadButton=""===this.documentModel||0===this.documentDescriptionModel.length||e.length>0},mounted(){this.$nextTick((()=>{this.axios.post(`${this.rootUrl}documentation/get/max_upload/`).then((e=>{this.maxUploadSize=e.data.max_upload_size})).catch((()=>{this.$store.dispatch("newToast",{header:"Failed to get the max upload size",message:`Had an issue getting data from backend. ${this.maxUploadString}`,extra_classes:"bg-danger",delay:0})}))}))}},Je=(0,O.Z)(Ge,[["render",function(e,t,o,n,l,s){const a=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",De,[(0,i._)("div",ye,[(0,i._)("div",be,[(0,i._)("div",ke,[(0,i._)("h2",null,[(0,i.Wm)(a,{icon:e.icons.userIcon},null,8,["icon"]),(0,i.Uk)(" Upload Document Wizard ")]),ve]),(0,i._)("div",Fe,[(0,i._)("div",Le,[(0,i._)("div",we,[xe,(0,i._)("p",Ue," You will be able to upload a file against this "+(0,d.toDisplayString)(o.destination)+". It will appear in the current folder. ",1),0===l.documentModel.length?((0,i.wg)(),(0,i.iD)("p",Me,' 1. Please click on "Upload File" button to upload a file ')):""===l.uploadPercentage?((0,i.wg)(),(0,i.iD)("p",Ie,' 2. Please modify the document descript to be more human readable. Or click the "Reset" button to remove the uploaded file. ')):((0,i.wg)(),(0,i.iD)("p",Se," 3. Document is currently uploading. Please be patient. "))]),(0,i._)("div",Ce,[0===l.documentModel.length?((0,i.wg)(),(0,i.iD)("div",Ee,[(0,i._)("div",$e,[(0,i._)("label",Ze,[(0,i.Uk)(" Please upload a file"),Te,(0,i.Uk)(" "+(0,d.toDisplayString)(l.maxUploadString)+" ",1),l.maxUploadWarning?((0,i.wg)(),(0,i.iD)("div",Be," Sorry - file too large ")):(0,i.kq)("v-if",!0)]),(0,i._)("input",{type:"file",class:"form-control",id:"document",accept:o.acceptedDocuments,onChange:t[0]||(t[0]=e=>s.handleFileUploads(e.target.files))},null,40,Ae)])])):""==l.uploadPercentage?((0,i.wg)(),(0,i.iD)("div",Ne,[(0,i.kq)(" DOCUMENT DESCRIPTION "),(0,i._)("div",Re,[Oe,(0,i.wy)((0,i._)("input",{id:"documentDescription","onUpdate:modelValue":t[1]||(t[1]=e=>l.documentDescriptionModel=e),type:"text",class:"form-control"},null,512),[[k.vModelText,l.documentDescriptionModel]])]),(0,i.kq)(" RESET FORM BUTTON "),We,(0,i._)("div",Pe,[(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>s.resetForm&&s.resetForm(...e)),class:"btn btn-warning"}," Reset Form ")])])):((0,i.wg)(),(0,i.iD)("div",qe,[(0,i.kq)(" THE UPLOAD SPINNER "),parseFloat(l.uploadPercentage).toFixed(0)<1?((0,i.wg)(),(0,i.iD)("div",ze,[(0,i.Uk)(" Uploading "+(0,d.toDisplayString)((100*parseFloat(l.uploadPercentage)).toFixed(2))+"% ",1),He])):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.kq)(" THE FINAL WRITING "),Ke],2112))]))])])]),(0,i._)("div",Ve,[Ye,(0,i._)("button",{type:"button",class:"btn btn-primary",disabled:l.disableUploadButton,onClick:t[3]||(t[3]=(...e)=>s.uploadFile&&s.uploadFile(...e))}," Upload File ",8,je)])])])])}]]),Qe={name:"DocumentsModule",components:{AddFolderWizard:W,AddLinkWizard:re,ConfirmFileDeleteVue:fe,Icon:b.JO,UploadDocumentWizard:Je},props:{overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0},readOnly:{type:Boolean,default:!1}},data:()=>({currentFolder:null,documentList:[],documentFilteredList:[],folderList:[],folderFilteredList:[],removeDocumentKey:""}),mixins:[N.Z],computed:{...(0,B.Se)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},watch:{overrideLocationId(){this.getDocumentList(),this.getFolderList()}},methods:{addFolder(){new y.u_(document.getElementById("addFolderModal")).show()},addLink(){new y.u_(document.getElementById("addLinkModal")).show()},confirmFileDelete(e){this.removeDocumentKey=e,new y.u_(document.getElementById("confirmFileDeleteModal")).show()},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getDocumentList(){0!==this.getLocationId()&&this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/files/`).then((e=>{this.documentList=e.data,this.updateDocumentFilteredList()}))},getFolderList(){0!==this.getLocationId()&&this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/folders/`).then((e=>{this.folderList=e.data,this.updateFolderFilteredList()}))},getIcon(e){if(""!==e.document_key__document_url_location&&null!==e.document_key__document_url_location)return this.icons.linkOut;const t=e.document_key__document.split(".");switch(t[t.length-1]){case"jpg":case"png":case"bmp":return this.icons.imageIcon;case"doc":case"docx":return this.icons.microsoftWord;case"xls":case"xlsx":return this.icons.microsoftExcel;case"ppt":case"pptx":return this.icons.microsoftPowerpoint;case"pdf":return this.icons.documentPdf;default:return this.icons.documentText}},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},goToParentDirectory(){const e=this.folderList.filter((e=>e.pk==this.currentFolder))[0];this.updateCurrentFolder(e.fields.parent_folder)},removeDocument(e){this.documentList=this.documentList.filter((t=>t.document_key_id!==e.document_key)),this.updateDocumentFilteredList()},shortName:e=>e.length<=50?e:`${e.substring(0,47)}...`,updateCurrentFolder(e){this.currentFolder=e,this.updateDocumentFilteredList(),this.updateFolderFilteredList()},updateDocumentList(e){this.documentList.push(e[0]),this.updateDocumentFilteredList()},updateDocumentFilteredList(){this.documentFilteredList=this.documentList.filter((e=>e.folder===this.currentFolder)).sort(((e,t)=>e.document_key__document_description>t.document_key__document_description))},updateFolderList(e){this.folderList.push(e[0]),this.updateFolderFilteredList()},updateFolderFilteredList(){this.folderFilteredList=this.folderList.filter((e=>e.fields.parent_folder===this.currentFolder)).sort(((e,t)=>e.fields.folder_description>t.fields.folder_description))},uploadDocument(){new y.u_(document.getElementById("uploadDocumentModal")).show()}},mounted(){this.$nextTick((()=>{this.getDocumentList(),this.getFolderList()}))}},Xe=(0,O.Z)(Qe,[["render",function(e,t,o,y,b,k){const v=(0,i.up)("Icon"),F=(0,i.up)("add-folder-wizard"),L=(0,i.up)("add-link-wizard"),w=(0,i.up)("confirm-file-delete-vue"),x=(0,i.up)("upload-document-wizard");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h2",null,[(0,i.Wm)(v,{icon:e.icons.bxBriefcase},null,8,["icon"]),(0,i.Uk)(" Documents ")]),(0,i._)("p",n," The following is a folder structure of all documents uploaded to this "+(0,d.toDisplayString)(this.getDestination()),1),(0,i.kq)(" DOCUMENT FOLDER TREE "),b.documentList.length+b.folderList.length==0?((0,i.wg)(),(0,i.iD)("div",l,s)):((0,i.wg)(),(0,i.iD)("div",a,[(0,i.kq)(" GO TO PARENT DIRECTORY "),null!=this.currentFolder?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:t[0]||(t[0]=e=>k.goToParentDirectory()),class:"document--child"},[(0,i.Wm)(v,{icon:e.icons.arrowUp,width:"80px",height:"80px"},null,8,["icon"]),r])):(0,i.kq)("v-if",!0),(0,i.kq)(" RENDER THE FOLDERS "),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.folderFilteredList,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.pk,onClick:e=>k.updateCurrentFolder(t.pk),class:"document--child"},[(0,i.Wm)(v,{icon:e.icons.folderIcon,width:"80px",height:"80px"},null,8,["icon"]),(0,i._)("p",u,(0,d.toDisplayString)(k.shortName(t.fields.folder_description)),1)],8,c)))),128)),(0,i.kq)(" RENDER THE FILES "),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.documentFilteredList,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.document_key_id,class:"document--child"},[(0,i._)("a",{href:`/private/${t.document_key_id}/`,rel:"noopener noreferrer",target:"_blank"},[(0,i.Wm)(v,{icon:k.getIcon(t),width:"80px",height:"80px"},null,8,["icon"]),(0,i._)("p",p,(0,d.toDisplayString)(k.shortName(t.document_key__document_description)),1)],8,m),(0,i.kq)(" REMOVE DOCUMENT "),e.userLevel>=2?((0,i.wg)(),(0,i.iD)("div",h,[(0,i.Wm)(v,{icon:e.icons.trashCan,onClick:e=>k.confirmFileDelete(t.document_key_id)},null,8,["icon","onClick"])])):(0,i.kq)("v-if",!0)])))),128))])),(0,i.kq)(" ADD DOCUMENTS AND FOLDER BUTTON "),g,!1===o.readOnly?((0,i.wg)(),(0,i.iD)("div",_,[e.userLevel>1?((0,i.wg)(),(0,i.iD)("button",f," New Document/File ")):(0,i.kq)("v-if",!0),(0,i._)("ul",D,[(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[1]||(t[1]=(...e)=>k.uploadDocument&&k.uploadDocument(...e))}," Upload Document ")]),(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[2]||(t[2]=(...e)=>k.addLink&&k.addLink(...e))}," Add Link ")]),(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[3]||(t[3]=(...e)=>k.addFolder&&k.addFolder(...e))}," Add Folder ")])])])):(0,i.kq)("v-if",!0),(0,i.kq)(" MODALS "),(0,i.kq)(" ADD FOLDER ID "),(0,i.Wm)(F,{destination:k.getDestination(),"location-id":e.locationId,"current-folder":b.currentFolder,"existing-folders":b.folderFilteredList,onUpdate_folder_list:t[4]||(t[4]=e=>k.updateFolderList(e))},null,8,["destination","location-id","current-folder","existing-folders"]),(0,i.kq)(" ADD LINK WIZARD "),(0,i.Wm)(L,{destination:k.getDestination(),"location-id":e.locationId,"current-folder":b.currentFolder,"exclude-documents":b.documentFilteredList,onUpdate_document_list:t[5]||(t[5]=e=>k.updateDocumentList(e))},null,8,["destination","location-id","current-folder","exclude-documents"]),(0,i.kq)(" CONFIRM DOCUMENT DELETE "),(0,i.Wm)(w,{"document-key":b.removeDocumentKey,onRemove_document:t[6]||(t[6]=e=>k.removeDocument(e))},null,8,["document-key"]),(0,i.kq)(" UPLOAD DOCUMENT WIZARD "),(0,i.Wm)(x,{destination:k.getDestination(),"location-id":k.getLocationId(),"current-folder":b.currentFolder,"exclude-documents":b.documentFilteredList,onUpdate_document_list:t[7]||(t[7]=e=>k.updateDocumentList(e))},null,8,["destination","location-id","current-folder","exclude-documents"])])}]])},2857:(e,t,o)=>{o.d(t,{Z:()=>f});var i=o(6252),d=o(3577);const n={key:0,class:"module-spacer"},l={class:"alert alert-dark"},s={key:1,class:"note-history"},a={class:"note-history--profile"},r=["src"],c={class:"text-instruction"},u={class:"text-instruction"},m={class:"note-history--note"};var p=o(7267),h=o(989),g=o(431);const _={name:"ListNotes",components:{editor:p.Z},mixins:[g.Z],props:{destination:{type:String,default:""},noteHistoryResults:{type:Array,default:()=>[]}},computed:{...(0,h.Se)({contentCss:"getContentCss",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",skin:"getSkin"})},methods:{profilePicture(e){return null!==e&&""!==e?`${this.rootUrl}private/${e}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`}}},f=(0,o(3744).Z)(_,[["render",function(e,t,o,p,h,g){const _=(0,i.up)("editor");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.kq)(" NOTE HISTORY "),0===o.noteHistoryResults.length?((0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",l," Sorry - but there are no notes for this "+(0,d.toDisplayString)(o.destination)+". ",1)])):((0,i.wg)(),(0,i.iD)("div",s,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.noteHistoryResults,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"note-history--row",key:t.object_note_id},[(0,i._)("div",a,[(0,i._)("img",{src:g.profilePicture(t.profile_picture),alt:"default profile",class:"note-history--profile-picture"},null,8,r),(0,i._)("div",c,(0,d.toDisplayString)(t.first_name)+" "+(0,d.toDisplayString)(t.last_name),1),(0,i._)("div",u,(0,d.toDisplayString)(e.getNiceDate(t.date_modified)),1)]),(0,i._)("div",m,[(0,i.Wm)(_,{init:{height:250,menubar:!1,plugins:["lists","image","codesample","table"],toolbar:[],skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:t.object_note,"onUpdate:modelValue":e=>t.object_note=e,disabled:!0},null,8,["init","modelValue","onUpdate:modelValue"])])])))),128))]))])}]])},7939:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(6252),d=o(3577);const n={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},l=(0,o(3744).Z)(n,[["render",function(e,t,o,n,l,s){return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.errorList,(e=>((0,i.wg)(),(0,i.iD)("span",{class:"error",key:e.$uid},(0,d.toDisplayString)(e.$message),1)))),128)}]])},431:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(7126);const d={methods:{getNiceDate:e=>""===e||null==e?"":i.ou.fromISO(e).toLocaleString(i.ou.DATETIME_MED),disableDate(e){const t=new Date;return t.setMilliseconds(0),t.setSeconds(0),t.setHours(0),e<=t.getTime()-36e5}}}},3058:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(3138);const d={methods:{showErrorModal(e,t,o){const d=document.getElementById("loadingModal");if(null===d)return;new i.u_(d).hide();const n=document.getElementById("errorModalContent");if(void 0===n)return;if(n.innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${t}-${o}<hr>${e}`,null===document.getElementById("errorModal"))return;const l=new i.u_(l);l.show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new i.u_(document.getElementById("errorModal")).show()}}}},624:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(7449);const d={data:()=>({darkTheme:i.$}),methods:{getTheme:e=>"dark"===e?i.$:null}}},5808:(e,t,o)=>{o.d(t,{Z:()=>M});var i=o(3985),d=o(5555),n=o(1826),l=o(6443),s=o(1327),a=o(8521),r=o(1056),c=o(4324),u=o(9672),m=o(9867),p=o(1239),h=o(5004),g=o(1321),_=o(1216),f=o(5550),D=o(7702),y=o(7903),b=o(2606),k=o(3843),v=o(2393),F=o(3360),L=o(9714),w=o(1323),x=o(2610),U=o(5968);const M={data:()=>({icons:{arrowUp:i.Z,bugIcon:d.Z,bxBriefcase:n.Z,cardChecklist:l.Z,clipboardIcon:s.Z,documentPdf:a.Z,documentText:r.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:m.Z,infoCircle:p.Z,linkIcon:h.Z,linkIcon2:g.Z,linkOut:_.Z,mailIcon:f.Z,microsoftExcel:D.Z,microsoftPowerpoint:y.Z,microsoftWord:b.Z,noteAdd:k.Z,objectStorage:v.Z,passwordIcon:F.Z,trashCan:L.Z,userIcon:w.Z,usersIcon:x.Z,xCircle:U.Z}})}}}]);