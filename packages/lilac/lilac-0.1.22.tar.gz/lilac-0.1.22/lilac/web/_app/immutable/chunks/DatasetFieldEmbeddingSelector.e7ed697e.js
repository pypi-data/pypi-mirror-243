import{S as ue,i as me,s as _e,k as X,a as K,l as j,m as G,h as B,c as M,n as H,b as U,a0 as q,v as C,d as h,f as O,g as d,N as ge,O as Z,w as de,U as he,y as w,z as E,A as z,V as pe,B as D,e as Q,a2 as R,a1 as W,ab as be}from"./index.6d58eddb.js";import{e as $e,b4 as ke,a4 as A,aA as ye,a2 as L,U as Se,S as Y,X as ve,am as se,ba as ae,b as J}from"./Commands.83bc508c.js";import{g as we}from"./settingsStore.3abd8af5.js";function x(s,t,n){const e=s.slice();return e[22]=t[n],e}function ee(s,t,n){const e=s.slice();return e[25]=t[n],e}function te(s,t,n){const e=s.slice();return e[1]=t[n],e}function Ee(s){let t,n;return t=new Y({props:{size:s[2],labelText:"Dataset",selected:s[8],$$slots:{default:[Ie]},$$scope:{ctx:s}}}),t.$on("change",s[12]),{c(){w(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p(e,l){const o={};l&4&&(o.size=e[2]),l&256&&(o.selected=e[8]),l&1073741856&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function ze(s){let t,n;return t=new se({props:{kind:"error",title:"Error",subtitle:s[5].error.message,hideCloseButton:!0}}),{c(){w(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p(e,l){const o={};l&32&&(o.subtitle=e[5].error.message),t.$set(o)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function De(s){let t,n;return t=new ae({}),{c(){w(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p:W,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function le(s){let t,n;return t=new J({props:{value:`${s[1].namespace}/${s[1].dataset_name}`}}),{c(){w(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p(e,l){const o={};l&32&&(o.value=`${e[1].namespace}/${e[1].dataset_name}`),t.$set(o)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function Ie(s){let t,n,e,l;t=new J({props:{value:"",text:"none"}});let o=s[5].data,i=[];for(let r=0;r<o.length;r+=1)i[r]=le(te(s,o,r));const a=r=>h(i[r],1,1,()=>{i[r]=null});return{c(){w(t.$$.fragment),n=K();for(let r=0;r<i.length;r+=1)i[r].c();e=Q()},l(r){E(t.$$.fragment,r),n=M(r);for(let c=0;c<i.length;c+=1)i[c].l(r);e=Q()},m(r,c){z(t,r,c),U(r,n,c);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(r,c);U(r,e,c),l=!0},p(r,c){if(c&32){o=r[5].data;let u;for(u=0;u<o.length;u+=1){const k=te(r,o,u);i[u]?(i[u].p(k,c),d(i[u],1)):(i[u]=le(k),i[u].c(),d(i[u],1),i[u].m(e.parentNode,e))}for(C(),u=o.length;u<i.length;u+=1)a(u);O()}},i(r){if(!l){d(t.$$.fragment,r);for(let c=0;c<o.length;c+=1)d(i[c]);l=!0}},o(r){h(t.$$.fragment,r),i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)h(i[c]);l=!1},d(r){D(t,r),r&&B(n),R(i,r),r&&B(e)}}}function Fe(s){let t,n;return t=new Y({props:{size:s[2],labelText:"Field",selected:s[7],$$slots:{default:[Pe]},$$scope:{ctx:s}}}),t.$on("change",s[13]),{c(){w(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p(e,l){const o={};l&4&&(o.size=e[2]),l&128&&(o.selected=e[7]),l&1073741832&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function Be(s){let t,n;return t=new se({props:{kind:"error",title:"Error",subtitle:s[4].error.message,hideCloseButton:!0}}),{c(){w(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p(e,l){const o={};l&16&&(o.subtitle=e[4].error.message),t.$set(o)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function Ne(s){let t,n;return t=new ae({}),{c(){w(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p:W,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function ne(s){let t,n;return t=new J({props:{value:L(s[25].path)}}),{c(){w(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p(e,l){const o={};l&8&&(o.value=L(e[25].path)),t.$set(o)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function Pe(s){let t,n,e=s[3],l=[];for(let i=0;i<e.length;i+=1)l[i]=ne(ee(s,e,i));const o=i=>h(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=Q()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);t=Q()},m(i,a){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(i,a);U(i,t,a),n=!0},p(i,a){if(a&8){e=i[3];let r;for(r=0;r<e.length;r+=1){const c=ee(i,e,r);l[r]?(l[r].p(c,a),d(l[r],1)):(l[r]=ne(c),l[r].c(),d(l[r],1),l[r].m(t.parentNode,t))}for(C(),r=e.length;r<l.length;r+=1)o(r);O()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)d(l[a]);n=!0}},o(i){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)h(l[a]);n=!1},d(i){R(l,i),i&&B(t)}}}function re(s){let t,n,e;function l(i){s[20](i)}let o={size:s[2],labelText:"Embedding",$$slots:{default:[Ve]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.selected=s[0]),t=new Y({props:o}),de.push(()=>he(t,"selected",l)),{c(){w(t.$$.fragment)},l(i){E(t.$$.fragment,i)},m(i,a){z(t,i,a),e=!0},p(i,a){const r={};a&4&&(r.size=i[2]),a&1073741888&&(r.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,r.selected=i[0],pe(()=>n=!1)),t.$set(r)},i(i){e||(d(t.$$.fragment,i),e=!0)},o(i){h(t.$$.fragment,i),e=!1},d(i){D(t,i)}}}function ie(s){let t,n;return t=new J({props:{value:s[22]}}),{c(){w(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p(e,l){const o={};l&64&&(o.value=e[22]),t.$set(o)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function Ve(s){let t,n,e=s[6],l=[];for(let i=0;i<e.length;i+=1)l[i]=ie(x(s,e,i));const o=i=>h(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=Q()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);t=Q()},m(i,a){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(i,a);U(i,t,a),n=!0},p(i,a){if(a&64){e=i[6];let r;for(r=0;r<e.length;r+=1){const c=x(i,e,r);l[r]?(l[r].p(c,a),d(l[r],1)):(l[r]=ie(c),l[r].c(),d(l[r],1),l[r].m(t.parentNode,t))}for(C(),r=e.length;r<l.length;r+=1)o(r);O()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)d(l[a]);n=!0}},o(i){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)h(l[a]);n=!1},d(i){R(l,i),i&&B(t)}}}function Ce(s){let t,n,e,l,o,i,a,r,c,u,k;const P=[De,ze,Ee],I=[];function F(m,p){return m[5].isLoading?0:m[5].isError?1:m[5].data.length>0?2:-1}~(e=F(s))&&(l=I[e]=P[e](s));const V=[Ne,Be,Fe],g=[];function b(m,p){var S,$;return(S=m[4])!=null&&S.isLoading?0:($=m[4])!=null&&$.isError?1:m[3]!=null&&m[3].length>0?2:-1}~(a=b(s))&&(r=g[a]=V[a](s));let _=s[6].length>0&&re(s);return{c(){t=X("div"),n=X("div"),l&&l.c(),o=K(),i=X("div"),r&&r.c(),c=K(),u=X("div"),_&&_.c(),this.h()},l(m){t=j(m,"DIV",{class:!0});var p=G(t);n=j(p,"DIV",{class:!0});var S=G(n);l&&l.l(S),S.forEach(B),o=M(p),i=j(p,"DIV",{class:!0});var $=G(i);r&&r.l($),$.forEach(B),c=M(p),u=j(p,"DIV",{class:!0});var T=G(u);_&&_.l(T),T.forEach(B),p.forEach(B),this.h()},h(){H(n,"class","w-1/3"),H(i,"class","w-1/3"),H(u,"class","w-1/3"),H(t,"class","flex w-full flex-row gap-x-4")},m(m,p){U(m,t,p),q(t,n),~e&&I[e].m(n,null),q(t,o),q(t,i),~a&&g[a].m(i,null),q(t,c),q(t,u),_&&_.m(u,null),k=!0},p(m,[p]){let S=e;e=F(m),e===S?~e&&I[e].p(m,p):(l&&(C(),h(I[S],1,1,()=>{I[S]=null}),O()),~e?(l=I[e],l?l.p(m,p):(l=I[e]=P[e](m),l.c()),d(l,1),l.m(n,null)):l=null);let $=a;a=b(m),a===$?~a&&g[a].p(m,p):(r&&(C(),h(g[$],1,1,()=>{g[$]=null}),O()),~a?(r=g[a],r?r.p(m,p):(r=g[a]=V[a](m),r.c()),d(r,1),r.m(i,null)):r=null),m[6].length>0?_?(_.p(m,p),p&64&&d(_,1)):(_=re(m),_.c(),d(_,1),_.m(u,null)):_&&(C(),h(_,1,1,()=>{_=null}),O())},i(m){k||(d(l),d(r),d(_),k=!0)},o(m){h(l),h(r),h(_),k=!1},d(m){m&&B(t),~e&&I[e].d(),~a&&g[a].d(),_&&_.d()}}}function Oe(s,t,n){let e,l,o,i,a,r,c,u,k,P=W,I=()=>(P(),P=be(l,f=>n(4,k=f)),l),F,V;s.$$.on_destroy.push(()=>P());let{dataset:g=void 0}=t,{path:b=void 0}=t,{embedding:_=void 0}=t,{inputSize:m=void 0}=t;const p=ge(),S=we();Z(s,S,f=>n(19,V=f));let $;const T=$e();Z(s,T,f=>n(5,F=f));function oe(f){const y=f.target.value;if(y==="")n(1,g=null);else{const[v,N]=y.split("/");n(1,g={namespace:v,name:N})}}function ce(f){const y=f.target.value;n(14,b=ve(y))}function fe(f){_=f,n(0,_),n(16,c),n(14,b),n(15,$),n(3,r),n(4,k),n(18,a)}return s.$$set=f=>{"dataset"in f&&n(1,g=f.dataset),"path"in f&&n(14,b=f.path),"embedding"in f&&n(0,_=f.embedding),"inputSize"in f&&n(2,m=f.inputSize)},s.$$.update=()=>{if(s.$$.dirty&524288&&n(17,e=[V.embedding,"gte-small","gte-base","openai","sbert"]),s.$$.dirty&34&&F.data&&F.data.length>0&&g===void 0&&n(1,g={namespace:F.data[0].namespace,name:F.data[0].dataset_name}),s.$$.dirty&2&&I(n(9,l=g!=null?ke(g==null?void 0:g.namespace,g==null?void 0:g.name):null)),s.$$.dirty&2&&n(8,o=g?`${g.namespace}/${g.name}`:""),s.$$.dirty&16&&n(15,$=k==null?void 0:k.data),s.$$.dirty&32768&&n(18,a=$?A($).filter(f=>!ye(f)&&f.dtype!=null):null),s.$$.dirty&262144&&n(3,r=a!=null?a.filter(f=>A(f).some(y=>y.signal!=null&&A(y).some(v=>{var N;return((N=v.dtype)==null?void 0:N.type)==="embedding"}))):null),s.$$.dirty&16392&&b!=null&&r!=null){const f=L(b);r.some(v=>L(v.path)===f)||n(14,b=void 0)}s.$$.dirty&16392&&r!=null&&r.length>0&&b==null&&n(14,b=r[0].path),s.$$.dirty&16384&&n(7,i=b?L(b):void 0),s.$$.dirty&49152&&n(16,c=b&&$?A(Se($,b)).filter(f=>f.signal!=null&&A(f).some(y=>{var v;return((v=y.dtype)==null?void 0:v.type)==="embedding"})):[]),s.$$.dirty&196608&&n(6,u=c.map(f=>f.signal.signal_name).sort((f,y)=>{let v=e.indexOf(f),N=e.indexOf(y);return v===-1&&(v=e.length),N===-1&&(N=e.length),v-N})),s.$$.dirty&65537&&_!=null&&(c.some(y=>y.path.at(-1)===_)||n(0,_=void 0)),s.$$.dirty&16387&&g!=null&&b!=null&&_!=null&&p("change",{dataset:g,path:b,embedding:_})},[_,g,m,r,k,F,u,i,o,l,S,T,oe,ce,b,$,c,e,a,V,fe]}class Ae extends ue{constructor(t){super(),me(this,t,Oe,Ce,_e,{dataset:1,path:14,embedding:0,inputSize:2})}}export{Ae as D};
