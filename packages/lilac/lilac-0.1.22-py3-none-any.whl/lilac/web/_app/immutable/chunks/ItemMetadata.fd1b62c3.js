import{S as fe,i as ce,s as ue,k as M,a as Z,q as de,e as D,l as Y,m as z,h as v,c as x,r as he,n as A,F as p,p as U,b as P,a0 as N,G as be,v as q,d as k,f as j,g as b,u as me,X as ve,Y as ke,a3 as we,a4 as te,y as G,z as H,A as W,B as X,a2 as Se,O as ye}from"./index.6d58eddb.js";import{a2 as Ee,ao as Ve,ai as I,U as $e,aj as Fe,aw as Pe,aF as Ie,W as Ne,av as Ae,aB as De,bu as Le,aG as Re,bv as Ce,bw as Me,a9 as Ye}from"./Commands.83bc508c.js";import{s as le,C as ze,a as Be}from"./notificationsStore.d43d4d83.js";function ne(r,e,l){const t=r.slice();return t[2]=e[l],t}function Ke(r){let e,l;return e=new ze({}),{c(){G(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){W(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function Oe(r){let e,l;return e=new Be({}),{c(){G(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){W(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function ae(r){var o;let e,l=(r[0].formattedValue||((o=r[0].children)!=null&&o.length?"":"n/a"))+"",t,n;return{c(){e=M("div"),t=de(l),this.h()},l(a){e=Y(a,"DIV",{title:!0,class:!0});var s=z(e);t=he(s,l),s.forEach(v),this.h()},h(){var a,s;A(e,"title",n=(a=r[0].value)==null?void 0:a.toString()),A(e,"class","truncated text-right svelte-1woyz4e"),p(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(a,s){P(a,e,s),N(e,t)},p(a,s){var i,c,u;s&1&&l!==(l=(a[0].formattedValue||((i=a[0].children)!=null&&i.length?"":"n/a"))+"")&&me(t,l),s&1&&n!==(n=(c=a[0].value)==null?void 0:c.toString())&&A(e,"title",n),s&1&&p(e,"italic",!a[0].formattedValue&&!((u=a[0].children)!=null&&u.length))},d(a){a&&v(e)}}}function ie(r){let e,l=[],t=new Map,n,o,a=r[0].children;const s=i=>Ee(i[2].path);for(let i=0;i<a.length;i+=1){let c=ne(r,a,i),u=s(c);t.set(u,l[i]=re(u,c))}return{c(){e=M("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=Y(i,"DIV",{});var c=z(e);for(let u=0;u<l.length;u+=1)l[u].l(c);c.forEach(v),this.h()},h(){p(e,"bg-blue-100",r[0].isSignal),p(e,"bg-emerald-100",r[0].isPreviewSignal)},m(i,c){P(i,e,c);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);o=!0},p(i,c){c&1&&(a=i[0].children,q(),l=ve(l,c,s,1,i,a,t,e,ke,re,null,ne),j()),(!o||c&1)&&p(e,"bg-blue-100",i[0].isSignal),(!o||c&1)&&p(e,"bg-emerald-100",i[0].isPreviewSignal)},i(i){if(!o){for(let c=0;c<a.length;c+=1)b(l[c]);i&&we(()=>{o&&(n||(n=te(e,le,{},!0)),n.run(1))}),o=!0}},o(i){for(let c=0;c<l.length;c+=1)k(l[c]);i&&(n||(n=te(e,le,{},!1)),n.run(0)),o=!1},d(i){i&&v(e);for(let c=0;c<l.length;c+=1)l[c].d();i&&n&&n.end()}}}function re(r,e){let l,t,n;return t=new ge({props:{node:e[2]}}),{key:r,first:null,c(){l=D(),G(t.$$.fragment),this.h()},l(o){l=D(),H(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,a){P(o,l,a),W(t,o,a),n=!0},p(o,a){e=o;const s={};a&1&&(s.node=e[2]),t.$set(s)},i(o){n||(b(t.$$.fragment,o),n=!0)},o(o){k(t.$$.fragment,o),n=!1},d(o){o&&v(l),X(t,o)}}}function Te(r){var K;let e,l,t,n,o,a,s=r[0].fieldName+"",i,c,u,d,g,S,E;const L=[Oe,Ke],w=[];function B(f,h){return f[0].expanded?0:1}t=B(r),n=w[t]=L[t](r);let _=(r[0].formattedValue||!((K=r[0].children)!=null&&K.length))&&ae(r),m=r[0].children&&r[0].expanded&&ie(r);return{c(){e=M("div"),l=M("button"),n.c(),o=Z(),a=M("div"),i=de(s),c=Z(),_&&_.c(),u=Z(),m&&m.c(),d=D(),this.h()},l(f){e=Y(f,"DIV",{class:!0});var h=z(e);l=Y(h,"BUTTON",{class:!0});var y=z(l);n.l(y),y.forEach(v),o=x(h),a=Y(h,"DIV",{class:!0});var V=z(a);i=he(V,s),V.forEach(v),c=x(h),_&&_.l(h),h.forEach(v),u=x(f),m&&m.l(f),d=D(),this.h()},h(){var f;A(l,"class","p-1"),p(l,"invisible",!((f=r[0].children)!=null&&f.length)),A(a,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),U(a,"min-width","10ch"),A(e,"class","flex items-center gap-x-1 pr-2 text-xs"),p(e,"bg-blue-100",r[0].isSignal),p(e,"bg-emerald-100",r[0].isPreviewSignal),p(e,"bg-teal-100",r[0].isLabel),U(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),U(e,"line-height","1.7rem")},m(f,h){P(f,e,h),N(e,l),w[t].m(l,null),N(e,o),N(e,a),N(a,i),N(e,c),_&&_.m(e,null),P(f,u,h),m&&m.m(f,h),P(f,d,h),g=!0,S||(E=be(l,"click",r[1]),S=!0)},p(f,[h]){var V,R;let y=t;t=B(f),t!==y&&(q(),k(w[y],1,1,()=>{w[y]=null}),j(),n=w[t],n||(n=w[t]=L[t](f),n.c()),b(n,1),n.m(l,null)),(!g||h&1)&&p(l,"invisible",!((V=f[0].children)!=null&&V.length)),(!g||h&1)&&s!==(s=f[0].fieldName+"")&&me(i,s),f[0].formattedValue||!((R=f[0].children)!=null&&R.length)?_?_.p(f,h):(_=ae(f),_.c(),_.m(e,null)):_&&(_.d(1),_=null),(!g||h&1)&&p(e,"bg-blue-100",f[0].isSignal),(!g||h&1)&&p(e,"bg-emerald-100",f[0].isPreviewSignal),(!g||h&1)&&p(e,"bg-teal-100",f[0].isLabel),h&1&&U(e,"padding-left",.25+(f[0].path.length-1)*.5+"rem"),f[0].children&&f[0].expanded?m?(m.p(f,h),h&1&&b(m,1)):(m=ie(f),m.c(),b(m,1),m.m(d.parentNode,d)):m&&(q(),k(m,1,1,()=>{m=null}),j())},i(f){g||(b(n),b(m),g=!0)},o(f){k(n),k(m),g=!1},d(f){f&&v(e),w[t].d(),_&&_.d(),f&&v(u),m&&m.d(f),f&&v(d),S=!1,E()}}}function _e(r){r.expanded=!0,r.children&&r.children.forEach(_e)}function Ue(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&_e(t),l(0,t)};return r.$$set=o=>{"node"in o&&l(0,t=o.node)},[t,n]}class ge extends fe{constructor(e){super(),ce(this,e,Ue,Te,ue,{node:0})}}function se(r,e,l){const t=r.slice();return t[7]=e[l],t}function oe(r){let e,l;return e=new ge({props:{node:r[7]}}),{c(){G(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){W(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.node=t[7]),e.$set(o)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function qe(r){let e,l,t=r[0].children||[],n=[];for(let a=0;a<t.length;a+=1)n[a]=oe(se(r,t,a));const o=a=>k(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=D()},l(a){for(let s=0;s<n.length;s+=1)n[s].l(a);e=D()},m(a,s){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,s);P(a,e,s),l=!0},p(a,[s]){if(s&1){t=a[0].children||[];let i;for(i=0;i<t.length;i+=1){const c=se(a,t,i);n[i]?(n[i].p(c,s),b(n[i],1)):(n[i]=oe(c),n[i].c(),b(n[i],1),n[i].m(e.parentNode,e))}for(q(),i=t.length;i<n.length;i+=1)o(i);j()}},i(a){if(!l){for(let s=0;s<t.length;s+=1)b(n[s]);l=!0}},o(a){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)k(n[s]);l=!1},d(a){Se(n,a),a&&v(e)}}}function je(r,e,l){let t,n,{row:o}=e,{selectRowsSchema:a=void 0}=e,{highlightedFields:s}=e;const i=Ve();ye(r,i,u=>l(5,n=u));function c(u){var f,h,y,V,R;const d=I.field(u),g=I.path(u);let S=I.value(u),E=I.span(u);if(((f=d==null?void 0:d.dtype)==null?void 0:f.type)==="string_span"&&(E=E||S,E!=null)){const $=[];for(let F=g.length-1;F>=0;F--){const J=g.slice(0,F),O=$e(a.schema,J);let C=null;if(((h=O.map)==null?void 0:h.input_path)!=null?C=O.map.input_path:((y=O.dtype)==null?void 0:y.type)==="string"&&(C=J),C!=null){const Q=Fe(o,C);if(Q){const T=I.value(Q);if(T){$.push(T.slice(E.start,E.end));break}}}}S=$}const L=((V=n.data)==null?void 0:V.some($=>{var F;return $.name===((F=d==null?void 0:d.signal)==null?void 0:F.signal_name)}))||!1,w=d?Pe(d):!1,B=d?Ie(d):!1;let _;L||w&&(d==null?void 0:d.dtype)==null||((R=d==null?void 0:d.dtype)==null?void 0:R.type)==="embedding"||(d==null?void 0:d.repeated_field)!=null?_="":S==null?_=null:_=Ne(S);function m($){const{[Le]:F,[Re]:J,[Ce]:O,[Me]:C,[Ye]:Q,...T}=$;return Object.values(T).filter(pe=>{var ee;return((ee=I.field(pe))==null?void 0:ee.label)==null})}const K=s.some($=>Ae($.path,g));return{children:Array.isArray(u)?u.map(c):m(u).map(c),fieldName:g[g.length-1],field:d,path:g,expanded:K,isSignal:w,isLabel:B,isPreviewSignal:a!=null?De(a,g):!1,isEmbeddingSignal:L,value:S,formattedValue:_}}return r.$$set=u=>{"row"in u&&l(2,o=u.row),"selectRowsSchema"in u&&l(3,a=u.selectRowsSchema),"highlightedFields"in u&&l(4,s=u.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=c(o))},[t,i,o,a,s]}class Xe extends fe{constructor(e){super(),ce(this,e,je,qe,ue,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{Xe as I};
