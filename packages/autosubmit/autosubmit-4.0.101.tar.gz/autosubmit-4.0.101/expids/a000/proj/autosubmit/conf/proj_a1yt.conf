[common]
MODEL = ecearth

VERSION = trunk

TEMPLATE_NAME = nemo4

## Number of parallel cores

# Number of parallel cores for OGCM component.
# INTEGER
NEM_NUMPROC = 336

# Number of parallel cores for AGCM component.
# INTEGER
IFS_NUMPROC = 

# Number of parallel I/O servers for XIOS.
# INTEGER
XIO_NUMPROC = 96

# number of processors to use for LPJG
# on MN4 20 is the recommended value, but use 30 and add :ioopt to LPJG_CONFIG config if running lsm
# on CCA 10 is the recommended value, spread over 2 nodes
LPJG_NUMPROC =

# Select the model output control class.
# if both outclass are empty the classic/ctl outclass will be used
# see auto-ecearth3/outclass folder.
BSC_OUTCLASS = reduced

# see: "runtime/classic/ctrl/cmip6-output-control-files"
# e.g. CMIP6_OUTCLASS = CMIP/EC-EARTH-AOGCM/cmip6-experiment-CMIP-piControl
CMIP6_OUTCLASS =

# After transferring output at /esarchive/exp remove a copy available at permanent storage 
# of HPC [Default: Do set "TRUE"].
# BOOLEAN = TRUE, FALSE
MODEL_output_remove = TRUE

# Model ID for cmorization
MODEL_ID = EC-Earth3-LR

# Activate cmorization [Empty = TRUE].
# BOOLEAN = TRUE, FALSE
CMORIZATION = TRUE

# Supply the name of the experiment associated (if there is any) otherwise leave it empty. 
# STRING (with space) = seasonal r1p1, seaiceinit r?p?
ASSOCIATED_EXPERIMENT = 

# Essential if cmorization is activated (Forcing).
# STRING = Nat,Ant (Nat and Ant is a single option)
FORCING =

# Delete run dir folder on inicialization step.
# BOOLEAN = TRUE, FALSE 
DELETE_RUN_DIR_ON_INI = FALSE

DELETE_INI_DIR_ON_INI = TRUE

# Model resolution (used in the metadata and file/directory name of the cmorfiles).
# STRING: HR, LR
MODEL_RES = LR

ADD_PROJECT_TO_HOST = false

# The keyword long_term_archiving is used to differentiate "important" experiments
# used for "production", deliverables, papers etc... and then should be kept in the
# long term from debug/development experiments (that could be deleted after some time)
# BOOLEAN = TRUE, FALSE
LONG_TERM_ARCHIVING = FALSE

# The keyword allow_custom_cmor_exp indicates if the experiment belongs to an official
# project and has to be officially shared/cmorized and then complies with the official
# MIP tables. If set to False, whatever CMOR_EXP will be accepted
# BOOLEAN = TRUE, FALSE
ALLOW_CUSTOM_CMOR_EXP = FALSE

# Official name of cmor experiment. Used in the metadata and file/directory name of the cmorfiles
# Must belong to control vocabulary described in 
# https://github.com/jonseddon/cmip6-cmor-tables/blob/d6c5339a13f302bfa3bcdee667e30c21745ac2c5/Tables/CMIP6_CV.json . 
# Most common ones are: piControl, historical, spinup-1950... 
CMOR_EXP = piControl

# In case of the need for non consecutive realizations in the ripf of cmor files, supply a list
# of integers associated to each member. Must have the same length as MEMBERS or can be left empty. 
# INTEGER LIST = 
CMOR_REALIZATION_INDEX = 

CMOR_ADD_STARTDATE = true

# If false allows modification of the CMOR tables to add non standard experiment names
# BOOLEAN = TRUE, FALSE [Empty = False ] 
PRODUCTION_EXP = false

[diagnostics]
# Diagnostics to run
DIAGS =

# Default frequency for the diagnostics run 
# STRING: mon, day, 6h
DIAGS_FREQ = mon

DIAGS_PATH = 

#CMOR format in which the Earth diagnostics will be produced. 
# STRING: PRIMAVERA, SPECS, CMIP5
DATA_CONVENTION = CMIP5

#Type of the project (used in cmorization to define the type of outputs produced by the model and how to convert them).
# STRING: PRIMAVERA,  STANDARD
PROJ_TYPE = STANDARD

# Activate or deactivate ece3-postproc.
# also the diagnostics will be perform only if you simulation start Jan 1st and finish Dec 21
# BOOLEAN = TRUE, FALSE. Empty = TRUE
ECE3_POSTPROC = FALSE

[grid]
# AGCM grid resolution, horizontal (truncation T) and vertical (levels L). 
# STRING = T159L62, T255L62, T255L91, T511L91, T799L62 (IFS)
IFS_resolution = 

# OGCM grid resolution. 
# STRING = ORCA1L46, ORCA1L75, ORCA025L46, ORCA025L75 (NEMO)
NEMO_resolution = ORCA1L75

[oasis]
# OASIS initial conditions
OASIS_ini =

# for the OASIS member ini, is defined based on the following rules:
# if OASIS_ini_member is empty -->  should match the ATM_ini_member/OCE_ini_member
# if ATM_ini_perturb=true --> OASIS_ini_member should be ATM_ini_member
OASIS_ini_member = 

# Coupler (OASIS) options.
OASIS3 = yes

# Number of pseduo-parallel cores for coupler 
# INTEGER = 1, 7 [Default], 10
OASIS_nproc =

# Handling the creation of coupling fields dynamically
# BOOLEAN = TRUE [Default], FALSE
OASIS_flds =

[ifs]
# Atmospheric initial conditions ready to be used. 
# STRING = ID found in: https://earth.bsc.es/wiki/doku.php?id=initial_conditions:atmospheric
ATM_ini =

# A different IC member per EXPID member ["PERT"] or which common IC member for all EXPID 
# members ["fc0" / "fc1"]. 
# String = PERT/fc0/fc1...
ATM_ini_member =

# Do you want to perturb the IC. 
# BOOLEAN: TRUE, FALSE
ATM_ini_member_perturb = FALSE

# Post-procssing frequency (in hours) Default: 6
# INTEGER 
NFRP = 6

# BOOLEAN = TRUE [Default], FALSE
LCMIP5 = 

# NUMBER  = 0, 1=3-PD, 2 [Default]=4.5, 3=6, 4=8.5
NRCP = 
 
# BOOLEAN = TRUE [Default], FALSE
LHVOLCA = TRUE

# YEAR = 1850, 2005, 0 [Default]
NFIXYR = 0

# Save daily output or not
# BOOLEAN = TRUE, FALSE [Default]
SAVEDDA = FALSE

# Save reduced daily output or not 
# BOOLEAN = TRUE, FALSE [Default]
ATM_REDUCED_OUTPUT = 

# Store grib codes from SH files [User need to refer defined  ppt* files for the experiment]
ATM_SH_CODES =

# Store levels against "ATM_SH_CODES" e.g: level1,level2,level3, ...
ATM_SH_LEVELS =

# Store grib codes from GG files [User need to refer defined  ppt* files for the experiment]
ATM_GG_CODES =

# Store levels against "ATM_GG_CODES" (133.128, 246.128, 247.128, 248.128) e.g: level1,level2,level3, ...
ATM_GG_LEVELS =

# SPPT stochastic physics active or not 
# BOOLEAN = TRUE, FALSE [Default]
LSPPT = FALSE

# Write the perturbation patterns for SPPT or not
# BOOLEAN = TRUE, FALSE [Default]
LWRITE_ARP =

# Number of scales for SPPT
# INTEGER  Default: 3
NS_SPPT =

# Standard deviations of each scale 
# NUMERIC values separated by , Default: set 0.50,0.25,0.125
SDEV_SPPT =

# Decorrelation times (in seconds) for each scale 
# NUMERIC values separated by , Default: set 2.16E4,2.592E5,2.592E6
TAU_SPPT =

# Decorrelation lengths (in meters) for each scale
# NUMERIC values separated by , Default: set 500.E3,1000.E3,2000.E3
XLCOR_SPPT =

# Clipping ratio (number of standard deviations) for SPPT
# NUMERIC  Default: set 2
XCLIP_SPPT =

# Stratospheric tapering in SPPT [Default: set "TRUE"]. 
# BOOLEAN = TRUE, FALSE
LTAPER_SPPT =

# Top of stratospheric tapering layer in Pa  
# NUMERIC Default: set to 50.E2
PTAPER_TOP =

# Bottom of stratospheric tapering layer in Pa 
# NUMERIC Default: set to 100.E2
PTAPER_BOT =

## ATMOSPHERIC NUDGING PARAMETERS ##
# Atmospheric nudging towards reinterpolated ERA-Interim data.
# BOOLEAN = TRUE, FALSE
ATM_NUDGING = FALSE

# Atmospheric nudging reference data experiment name. 
# EXPID = b0ir
ATM_refnud =

# Vegetation fields for tuning and 21st century climate change scenarios https://dev.ec-earth.org/issues/436
# STRING: era20c [default] or ifs (mandatory for T511)
IFS_VEG_SOURCE = cmip6

[nemo]
# Ocean initial conditions ready to be used. [Default: leave empty]. 
# STRING = ID found here : https://earth.bsc.es/wiki/doku.php?id=initial_conditions:oceanic
OCEAN_ini =

# A different IC member per EXPID member ["PERT"] or which common IC member for all EXPID 
# members ["fc0" / "fc1"]. 
# STRING = PERT/fc0/fc1...
OCEAN_ini_member =

# Avoid computation of land-only subdomains 
# BOOLEAN = TRUE [default], FALSE
NEMO_remove_land = TRUE

# Ocean Advection Scheme 
# STRING = tvd [default], cen2
ADVSCH = tvd

# Surface Restoring activation.
# !!! WARNING !!! By default both sst and sss restoring are done.
# It is the user's responsibility to change the namelist if he wants to activate a restoring for only one of them
# BOOLEAN = TRUE, FALSE.
SURF_RESTO = FALSE

# Toward which target surface variables are restored to; important if "SURF_RESTO" is set to TRUE. 
# A directory ${DATA_SURF_RESTO} must exist in /gpfs/projects/bsc32/repository/surface_restoring/ocean/${DATA_SURF_RESTO}/${nem_grid}/${DATA_SURF_RESTO_member} containing the restoring files
# STRING = fa9p, s4, glorys2v1, myexp_resto
DATA_SURF_RESTO = 

# A different DATA_SURF_RESTO member per EXPID member ["PERT"] or which common DATA_SURF_RESTO member for all EXPID members ["fc0" / "fc1"]. 
# String = PERT/fc0/fc1..
DATA_SURF_RESTO_member = 

# Nudging activation. 
# !!! WARNING !!! By default both temperature and salinity nudging are done.
# It is the user's responsibility to change the namelist if he wants to activate a nudging for only one of them
# BOOLEAN = TRUE, FALSE
OCE_NUDG = FALSE
OCEAN_NUDGING = FALSE

# Toward which target ocean is nuged to; essential if "OCE_NUDG" is TRUE. 
# A directory ${DATA_OCE_NUDG} must exist in /gpfs/projects/bsc32/repository/nudging/ocean/${DATA_OCE_NUDG}/${nem_grid}/${DATA_OCE_NUDG_member} containing the restoring files
# STRING = fa9p, s4, glorys2v1, myexp_nudg
DATA_OCE_NUDG =  
OCEAN_NUDDATA =

# A different DATA_OCE_NUDG member per EXPID member ["PERT"] or which common DATA_SURF_RESTO member for all EXPID members ["fc0" / "fc1"]. 
# String = PERT/fc0/fc1..
DATA_OCE_NUDG_member = 

# Rebuild and store restarts to HSM for an immediate prediction experiment. 
# BOOLEAN = TRUE, FALSE
OCEAN_STORERST = FALSE

# Year of the forcing or -1 if same as run year. 
# INTEGER = YYYY, -1
NEM_FIXED_FORCING_YEAR = -1

# Forcing files. 
# STRING = eraint, DFS5.2, CoreII[default], CoreII_interannual
NEM_FORCING_SET = CoreII

[ice]
# Sea-Ice Model 
# STRING = LIM2, LIM3 [default]
ICE = LIM3

# Sea-ice initial conditions ready to be used.
# STRING = ID 
# found here : https://earth.bsc.es/wiki/doku.php?id=initial_conditions:sea_ice
ICE_ini = 

# A different IC member per EXPID member ["PERT"] or which common IC member for all EXPID 
# members ["fc0" / "fc1"]. 
# String = PERT/fc0/fc1...
ICE_ini_member =

[pisces]
# Activate PISCES. 
# BOOLEAN = TRUE, FALSE
PISCES = FALSE

# PISCES initial conditions ready to be used.
# STRING = ID found here : https://earth.bsc.es/wiki/doku.php?id=initial_conditions:biogeochemistry
PISCES_ini =

# A different IC member per EXPID member ["PERT"] or which common IC member for all EXPID members ["fc0" / "fc1"]. 
# String = PERT/fc0/fc1...
PISCES_ini_member =  

PISCES_OFF = FALSE

# Dynamical fields need for PISCES to run OFFLINE. Here the ID of the exp must be specified. 
# the files are located in:/esarchive/releases/dynamical_fields/expID
# the user must  WRITE manually the right dinamical fields  
PISCES_OFF_DYN= 

[save_ic]
# Save initial conditions during the run. For more information see
# https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/creation-of-initial-conditions
# Activate saving of ICs [Default: leave empty]
# TRUE/custom (specify offset and condition below), 
# end_leg (save ICs at the end of every leg), 
# end_run (save ICs at the end of the run)
# STRING = FALSE [empty] (do not save ICs), 
SAVE_IC = FALSE

# if SAVE_IC=custom specify an offset from chunk start date for each date, 
# enclosed by "" e.g. :
SAVE_IC_OFFSET = "+1 month" "+4 month" "+ 7 month" "+ 10 month" "+ 12 month"

# if SAVE_IC=custom optionally specify a condition (in bash syntax) to save 
# ICs for current chunk, if left empty ICs will be saved every chunk
# e.g. (( run_num_legs%10 == 0 )) to save ICs every 10 chunks
#SAVE_IC_COND = (( run_num_legs%10 == 0 ))
# should we copy the IC files to repository in $HSM_DIR/ic (default false) ?
# if set to FALSE, IC files will be stored in exp folder in the ic/ directory
SAVE_IC_REPOS = FALSE

[ECMWF_SYNCHRONIZATION]
# For more information about how to use this feature, please check the following wiki section:
# https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/proj_EXPID.conf#ecmwf_synchronization
# by default true, this will enable/disable both the SCP/RSYNC in LOCAL_SETUP (now called SYNC) and the extract/copy_ctrl in REMOTE_SETUP (compilation.sh)
UPDATE_MODEL = TRUE

# by default true, this will enable/disable the untar of the .tar file
MODEL_EXTRACT = TRUE

# use dt machine to tar/get the model ( usually faster ) - note you need to have proper ssh keys configured to use this feature (check wiki section above)
USE_DT_MACHINE = FALSE

# Credentials of DT machine to tar/pull the model to the ecmwf-x40 host (faster option)
DT_HOST =

DT_USER =

DTHOSTMACHINE=

[lpjg]
# LPJ-Guess (LPJG) dynamic vegetation model, used in the ece-esm.sh (ESM model) and ece-lsm.sh (offline land surface model) runscripts
# For more information see https://earth.bsc.es/gitlab/es/auto-ecearth3/wikis/earth-system-model
# Activate LPJG, STRING = FALSE/[empty]/TRUE [Default: FALSE]
LPJG = FALSE
# LPJG config, choose one of lpjg (feedback off) or lpjg:fdbck (feedback on)
LPJG_CONFIG = lpjg:fdbck

# REMOTE_SETUP
# these variables are to be used for development, allowing to retain any local
# changes to the sources and compile the model more quickly
# MODEL_EXTRACT : extract files from uploaded .tar.gz file and copy runtime files
# BOOLEAN = TRUE [default], FALSE
MODEL_CLEAN =

# MODEL_CLEAN   : do 'make clean' for all model components (default:true)
# BOOLEAN = TRUE [default], FALSE
MODEL_EXTRACT =

# BOOLEAN = TRUE, FALSE [default]
SAVEMMA = FALSE

LOCAL_SCRATCH_DIR=

# VARIABLES TO BE IGNORED BY THE AUTOSUBMIT CHECKER [leave empty]
LIM_timestep =
NEMO_timestep =
PISCES_timestep =
IFS_timestep =
RUN_coupFreq =





