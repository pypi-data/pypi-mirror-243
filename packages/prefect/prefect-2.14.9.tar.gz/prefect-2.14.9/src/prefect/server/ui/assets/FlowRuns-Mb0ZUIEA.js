import{d as X,Z as $,M as j,f as k,g as d,h as y,_ as G,a0 as J,a1 as Y,j as c,c as n,k as u,o,m as l,u as e,a2 as Z,l as v,P as q,F as b,a3 as z,n as g,a4 as K,a as i,S as V,a5 as O,a6 as Q,a7 as W,a8 as ee,a9 as oe,aa as te,ab as se,L as le,p as ae,ac as ne}from"./index-gRcOmcxb.js";import{u as ue}from"./usePageTitle-ew0jDH_R.js";const re={class:"flow-runs__list"},de={class:"flow-runs__subflows-toggle"},F=3e4,me=X({__name:"FlowRuns",setup(ce){const h=$(),m=j(),p=k(m.flowRuns.getFlowRunsCount,[{}]),C=d(()=>p.executed),x=d(()=>p.response===0),f=y(),N=G(f,1200),{filter:t,isCustomFilter:S}=J({flowRuns:{nameLike:N}}),w=d({get(){return t.flowRuns.parentTaskRunIdNull},set(R){t.flowRuns.parentTaskRunIdNull=R?!0:void 0}}),B=k(m.ui.getFlowRunHistory,[t],{interval:F}),T=d(()=>B.response??[]),{flowRuns:_,total:H,subscriptions:I,next:L}=Y(t,{mode:"infinite",interval:F}),r=y([]);function M(){h.push(ne.flowRuns())}const U=()=>{r.value=[],I.refresh()};return ue("Flow Runs"),(R,s)=>{const D=c("p-toggle"),A=c("p-list-header"),E=c("p-button"),P=c("p-layout-default");return o(),n(P,{class:"flow-runs"},{header:u(()=>[l(e(Z))]),default:u(()=>[C.value?(o(),v(b,{key:0},[x.value?(o(),n(e(q),{key:0})):(o(),v(b,{key:1},[l(e(z)),e(g).md?(o(),n(e(K),{key:0,history:T.value,"start-date":e(t).flowRuns.expectedStartTimeAfter,"end-date":e(t).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):i("",!0),V("div",re,[l(A,{sticky:""},{controls:u(()=>[V("div",de,[l(D,{modelValue:w.value,"onUpdate:modelValue":s[0]||(s[0]=a=>w.value=a),append:"Hide subflows"},null,8,["modelValue"])]),e(g).md?(o(),n(e(O),{key:0,modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=a=>f.value=a),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):i("",!0)]),sort:u(()=>[l(e(Q),{modelValue:e(t).sort,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).sort=a),class:"flow-runs__sort"},null,8,["modelValue"])]),default:u(()=>[r.value.length==0?(o(),n(e(W),{key:0,count:e(H),label:"Flow run"},null,8,["count"])):(o(),n(e(ee),{key:1,count:r.value.length},null,8,["count"])),l(e(oe),{selected:r.value,onDelete:U},null,8,["selected"])]),_:1}),l(e(te),{selected:r.value,"onUpdate:selected":s[3]||(s[3]=a=>r.value=a),selectable:"","flow-runs":e(_),onBottom:e(L)},null,8,["selected","flow-runs","onBottom"]),e(_).length?i("",!0):(o(),n(e(se),{key:0},le({_:2},[e(S)?{name:"actions",fn:u(()=>[l(E,{small:"",onClick:M},{default:u(()=>[ae(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):i("",!0)]),_:1})}}});export{me as default};
